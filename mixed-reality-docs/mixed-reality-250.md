---
title: MR 250 - HoloLens e auricolari coinvolgenti di condivisione
description: Seguire questa procedura dettagliata sull'uso delle cuffie per Unity, Visual Studio, HoloLens e realtà mista di Windows per acquisire i dettagli di condivisione vntana tra dispositivi per realtà mista di codifica.
author: keveleigh
ms.author: kurtie
ms.date: 03/21/2018
ms.topic: article
keywords: holotoolkit, mixedrealitytoolkit, mixedrealitytoolkit-unity, coinvolgenti, movimento controller, condivisione, controller xbox, reti, più dispositivi
ms.openlocfilehash: 9e1cb0d168b8bf830b4477190516cd19caef7972
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/12/2019
ms.locfileid: "59598043"
---
>[!NOTE]
><span data-ttu-id="dd08d-104">Le esercitazioni Academy di realtà mista sono state progettate con HoloLens (dal 1 ° generazione) e mista auricolari Immersive realtà presente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-104">The Mixed Reality Academy tutorials were designed with HoloLens (1st gen) and Mixed Reality Immersive Headsets in mind.</span></span>  <span data-ttu-id="dd08d-105">Siamo di conseguenza, che è importante non cancellare le esercitazioni create per gli sviluppatori che stanno ancora cercando indicazioni per lo sviluppo per tali dispositivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-105">As such, we feel it is important to leave these tutorials in place for developers who are still looking for guidance in developing for those devices.</span></span>  <span data-ttu-id="dd08d-106">Queste esercitazioni verranno **_non_** verrà aggiornata con il set di strumenti o in uso per HoloLens 2 interazioni più recente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-106">These tutorials will **_not_** be updated with the latest toolsets or interactions being used for HoloLens 2.</span></span>  <span data-ttu-id="dd08d-107">Essi verranno mantenute per continuare a utilizzare i dispositivi supportati.</span><span class="sxs-lookup"><span data-stu-id="dd08d-107">They will be maintained to continue working on the supported devices.</span></span> <span data-ttu-id="dd08d-108">Sarà presente una nuova serie di esercitazioni che verranno pubblicati in futuro che consentiranno di dimostrare come lo sviluppo per HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="dd08d-108">There will be a new series of tutorials that will be posted in the future that will demonstrate how to develop for HoloLens 2.</span></span>  <span data-ttu-id="dd08d-109">Questo avviso verrà aggiornato con un collegamento a tali esercitazioni quando vengono registrate.</span><span class="sxs-lookup"><span data-stu-id="dd08d-109">This notice will be updated with a link to those tutorials when they are posted.</span></span>

<br>

# <a name="mr-sharing-250-hololens-and-immersive-headsets"></a><span data-ttu-id="dd08d-110">MR Sharing 250: HoloLens e auricolari coinvolgenti</span><span class="sxs-lookup"><span data-stu-id="dd08d-110">MR Sharing 250: HoloLens and immersive headsets</span></span>

<span data-ttu-id="dd08d-111">Con la flessibilità di Universal Windows Platform (UWP), è facile creare un'applicazione che si estende su più dispositivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-111">With the flexibility of Universal Windows Platform (UWP), it is easy to create an application that spans multiple devices.</span></span> <span data-ttu-id="dd08d-112">Con questa flessibilità, possiamo creare esperienze in grado di sfruttano le potenzialità di ogni dispositivo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-112">With this flexibility, we can create experiences that leverage the strengths of each device.</span></span> <span data-ttu-id="dd08d-113">Questa esercitazione verrà descritta una base condividere esperienze in esecuzione su auricolari coinvolgenti di HoloLens e realtà mista di Windows.</span><span class="sxs-lookup"><span data-stu-id="dd08d-113">This tutorial will cover a basic shared experience that runs on both HoloLens and Windows Mixed Reality immersive headsets.</span></span> <span data-ttu-id="dd08d-114">Questo contenuto è stato originariamente fornito in occasione della conferenza Microsoft Build 2017 a Seattle, WA.</span><span class="sxs-lookup"><span data-stu-id="dd08d-114">This content was originally delivered at the Microsoft Build 2017 conference in Seattle, WA.</span></span>

<span data-ttu-id="dd08d-115">**In questa esercitazione si apprenderà come:**</span><span class="sxs-lookup"><span data-stu-id="dd08d-115">**In this tutorial, we will:**</span></span>

* <span data-ttu-id="dd08d-116">Configurare una rete usando UNET.</span><span class="sxs-lookup"><span data-stu-id="dd08d-116">Setup a network using UNET.</span></span>
* <span data-ttu-id="dd08d-117">Condividere vntana tra dispositivi per realtà mista.</span><span class="sxs-lookup"><span data-stu-id="dd08d-117">Share holograms across mixed reality devices.</span></span>
* <span data-ttu-id="dd08d-118">Stabilire una visualizzazione diversa dell'applicazione in base alla quale viene utilizzato il dispositivo di realtà mista.</span><span class="sxs-lookup"><span data-stu-id="dd08d-118">Establish a different view of the application depending on which mixed reality device is being used.</span></span>
* <span data-ttu-id="dd08d-119">Creare un'esperienza condivisa in cui gli utenti di HoloLens guidano gli utenti auricolari immersive avvantaggiarsene semplice.</span><span class="sxs-lookup"><span data-stu-id="dd08d-119">Create a shared experience where HoloLens users guide immersive headsets users through some simple puzzles.</span></span>

## <a name="device-support"></a><span data-ttu-id="dd08d-120">Supporto di dispositivi</span><span class="sxs-lookup"><span data-stu-id="dd08d-120">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="dd08d-121">Corso</span><span class="sxs-lookup"><span data-stu-id="dd08d-121">Course</span></span></th><th style="width:150px"> <span data-ttu-id="dd08d-122"><a href="hololens-hardware-details.md">HoloLens</a></span><span class="sxs-lookup"><span data-stu-id="dd08d-122"><a href="hololens-hardware-details.md">HoloLens</a></span></span></th><th style="width:150px"> <span data-ttu-id="dd08d-123"><a href="immersive-headset-hardware-details.md">Auricolari coinvolgenti</a></span><span class="sxs-lookup"><span data-stu-id="dd08d-123"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td><span data-ttu-id="dd08d-124">MR Sharing 250: HoloLens e auricolari coinvolgenti</span><span class="sxs-lookup"><span data-stu-id="dd08d-124">MR Sharing 250: HoloLens and immersive headsets</span></span></td><td style="text-align: center;"> <span data-ttu-id="dd08d-125">✔️</span><span class="sxs-lookup"><span data-stu-id="dd08d-125">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="dd08d-126">✔️</span><span class="sxs-lookup"><span data-stu-id="dd08d-126">✔️</span></span></td>
</tr>
</table>

## <a name="before-you-start"></a><span data-ttu-id="dd08d-127">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="dd08d-127">Before you start</span></span>

### <a name="prerequisites"></a><span data-ttu-id="dd08d-128">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="dd08d-128">Prerequisites</span></span>

* <span data-ttu-id="dd08d-129">Un PC Windows 10 con il [strumenti di sviluppo necessari](install-the-tools.md) e [configurato per supportare un visore VR immersivi di realtà mista di Windows](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span><span class="sxs-lookup"><span data-stu-id="dd08d-129">A Windows 10 PC with the [necessary development tools](install-the-tools.md) and [configured to support a Windows Mixed Reality immersive headset](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>
* <span data-ttu-id="dd08d-130">Un controller Xbox che funziona con il PC.</span><span class="sxs-lookup"><span data-stu-id="dd08d-130">An Xbox controller that works with your PC.</span></span>
* <span data-ttu-id="dd08d-131">Almeno un dispositivo HoloLens e uno visore VR immersivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-131">At least one HoloLens device and one immersive headset.</span></span>
* <span data-ttu-id="dd08d-132">Una rete che consente di Broadcast di UDP per l'individuazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-132">A network which allows UDP Broadcast for discovery.</span></span>

### <a name="project-files"></a><span data-ttu-id="dd08d-133">File di progetto</span><span class="sxs-lookup"><span data-stu-id="dd08d-133">Project files</span></span>

* <span data-ttu-id="dd08d-134">Scaricare il [file](https://github.com/Microsoft/MixedReality250/archive/master.zip) necessarie per il progetto.</span><span class="sxs-lookup"><span data-stu-id="dd08d-134">Download the [files](https://github.com/Microsoft/MixedReality250/archive/master.zip) required by the project.</span></span> <span data-ttu-id="dd08d-135">Estrarre i file in un facile da ricordare di percorso.</span><span class="sxs-lookup"><span data-stu-id="dd08d-135">Extract the files to an easy to remember location.</span></span>
* <span data-ttu-id="dd08d-136">Questo progetto richiede la [una versione consigliata di Unity con il supporto di realtà mista di Windows](install-the-tools.md).</span><span class="sxs-lookup"><span data-stu-id="dd08d-136">This project requires the [a recommended version of Unity with Windows Mixed Reality support](install-the-tools.md).</span></span>

>[!NOTE]
><span data-ttu-id="dd08d-137">Se si desidera esaminare il codice sorgente prima di scaricare, ha [disponibile in GitHub](https://github.com/Microsoft/MixedReality250).</span><span class="sxs-lookup"><span data-stu-id="dd08d-137">If you want to look through the source code before downloading, it's [available on GitHub](https://github.com/Microsoft/MixedReality250).</span></span>

## <a name="chapter-1---holo-world"></a><span data-ttu-id="dd08d-138">Capitolo 1 - Holo World</span><span class="sxs-lookup"><span data-stu-id="dd08d-138">Chapter 1 - Holo World</span></span>

>[!VIDEO https://www.youtube.com/embed/IC0rp6rLiEc]

### <a name="objectives"></a><span data-ttu-id="dd08d-139">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="dd08d-139">Objectives</span></span>

<span data-ttu-id="dd08d-140">Assicurarsi che l'ambiente di sviluppo sia pronto per iniziare con un progetto semplice.</span><span class="sxs-lookup"><span data-stu-id="dd08d-140">Make sure the development environment is ready to go with a simple project.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="dd08d-141">Che cosa verrà compilata</span><span class="sxs-lookup"><span data-stu-id="dd08d-141">What we will build</span></span>

<span data-ttu-id="dd08d-142">Un'applicazione che mostra un ologrammi su HoloLens o un visore VR immersivi di realtà mista di Windows.</span><span class="sxs-lookup"><span data-stu-id="dd08d-142">An application that shows a hologram on either HoloLens or a Windows Mixed Reality immersive headset.</span></span>

### <a name="steps"></a><span data-ttu-id="dd08d-143">Passaggi</span><span class="sxs-lookup"><span data-stu-id="dd08d-143">Steps</span></span>
* <span data-ttu-id="dd08d-144">Aprire Unity.</span><span class="sxs-lookup"><span data-stu-id="dd08d-144">Open Unity.</span></span>
    * <span data-ttu-id="dd08d-145">Selezionare **aperto**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-145">Select **Open**.</span></span>
    * <span data-ttu-id="dd08d-146">Passare a dove sono stati estratti i file di progetto.</span><span class="sxs-lookup"><span data-stu-id="dd08d-146">Navigate to where you extracted the project files.</span></span>
    * <span data-ttu-id="dd08d-147">Fare clic su **Seleziona cartella**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-147">Click **Select Folder**.</span></span>
    * <span data-ttu-id="dd08d-148">*Richiederà un po' mentre per Unity elaborare la prima volta che il progetto.*</span><span class="sxs-lookup"><span data-stu-id="dd08d-148">*It will take a little while for Unity to process the project the first time.*</span></span>
* <span data-ttu-id="dd08d-149">Verificare che in Unity sia abilitato realtà mista.</span><span class="sxs-lookup"><span data-stu-id="dd08d-149">Check that Mixed Reality is enabled in Unity.</span></span>
    * <span data-ttu-id="dd08d-150">Aprire la finestra di dialogo Impostazioni di compilazione (**CTRL + MAIUSC + B** o **File > Build Settings...** ).</span><span class="sxs-lookup"><span data-stu-id="dd08d-150">Open the build settings dialog (**Control+Shift+B** or **File > Build Settings...**).</span></span>
    * <span data-ttu-id="dd08d-151">Selezionare **Universal Windows Platform** quindi fare clic su **commutatore piattaforma**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-151">Select **Universal Windows Platform** then click **Switch Platform**.</span></span>
    * <span data-ttu-id="dd08d-152">Selezionare **Modifica > impostazioni del lettore**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-152">Select **Edit>Player Settings**.</span></span>
    * <span data-ttu-id="dd08d-153">Nel **Inspector** pannello sul lato destro, quindi espandere **XR impostazioni**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-153">In the **Inspector** panel on the right hand side, expand **XR Settings**.</span></span>
    * <span data-ttu-id="dd08d-154">Verificare i **supportato di realtà virtuale** casella.</span><span class="sxs-lookup"><span data-stu-id="dd08d-154">Check the **Virtual Reality Supported** box.</span></span>
    * <span data-ttu-id="dd08d-155">*Realtà mista di Windows deve essere il SDK di realtà virtuale.*</span><span class="sxs-lookup"><span data-stu-id="dd08d-155">*Windows Mixed Reality should be the Virtual Reality SDK.*</span></span>
* <span data-ttu-id="dd08d-156">Creare una scena.</span><span class="sxs-lookup"><span data-stu-id="dd08d-156">Create a scene.</span></span>
    * <span data-ttu-id="dd08d-157">Nel **gerarchia** con il pulsante destro fare clic su **Main Camera** seleziona **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-157">In the **Hierarchy** right click **Main Camera** select **Delete**.</span></span>
    * <span data-ttu-id="dd08d-158">Dal **HoloToolkit > Input > Prefabs** trascinare **MixedRealityCameraParent** per il **gerarchia**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-158">From **HoloToolkit > Input > Prefabs** drag **MixedRealityCameraParent** to the **Hierarchy**.</span></span>
* <span data-ttu-id="dd08d-159">Aggiungere Vntana alla scena</span><span class="sxs-lookup"><span data-stu-id="dd08d-159">Add Holograms to the scene</span></span>
    * <span data-ttu-id="dd08d-160">Dal **AppPrefabs** trascinare **Skybox** per il **visualizzazione scena**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-160">From **AppPrefabs** drag **Skybox** to the **Scene View**.</span></span>
    * <span data-ttu-id="dd08d-161">Dal **AppPrefabs** trascinare **responsabili** per il **gerarchia**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-161">From **AppPrefabs** drag **Managers** to the **Hierarchy**.</span></span>
    * <span data-ttu-id="dd08d-162">Dal **AppPrefabs** trascinare **isola** per il **gerarchia**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-162">From **AppPrefabs** drag **Island** to the **Hierarchy**.</span></span>
* <span data-ttu-id="dd08d-163">Salvare e compilare</span><span class="sxs-lookup"><span data-stu-id="dd08d-163">Save And build</span></span>
    * <span data-ttu-id="dd08d-164">Salvare (entrambe **controllo + S** oppure **File > Salva scena**)</span><span class="sxs-lookup"><span data-stu-id="dd08d-164">Save (either **Control+S** or **File > Save Scene**)</span></span>
    * <span data-ttu-id="dd08d-165">Poiché si tratta di una nuova scena, è necessario assegnargli il nome.</span><span class="sxs-lookup"><span data-stu-id="dd08d-165">Since this is a new scene, you'll need to name it.</span></span> <span data-ttu-id="dd08d-166">Nome non è rilevante, ma si utilizza SharedMixedReality.</span><span class="sxs-lookup"><span data-stu-id="dd08d-166">Name doesn't matter, but we use SharedMixedReality.</span></span>
* <span data-ttu-id="dd08d-167">Esportare in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="dd08d-167">Export To Visual Studio</span></span>
    * <span data-ttu-id="dd08d-168">Aprire il menu di compilazione (**CTRL + MAIUSC + B** oppure **File > Build Settings**)</span><span class="sxs-lookup"><span data-stu-id="dd08d-168">Open the build menu (**Control+Shift+B** or **File > Build Settings**)</span></span>
    * <span data-ttu-id="dd08d-169">Fare clic su **aggiungere scene Open.**</span><span class="sxs-lookup"><span data-stu-id="dd08d-169">Click **Add Open Scenes.**</span></span>
    * <span data-ttu-id="dd08d-170">Controllare **Unity C# progetti**</span><span class="sxs-lookup"><span data-stu-id="dd08d-170">Check **Unity C# Projects**</span></span>
    * <span data-ttu-id="dd08d-171">Fai clic su **Compila**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-171">Click **Build**.</span></span>
    * <span data-ttu-id="dd08d-172">Nella finestra di Esplora file che viene visualizzato, creare una nuova cartella denominata **App**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-172">In the file explorer window that appears, create a New Folder named **App**.</span></span>
    * <span data-ttu-id="dd08d-173">Solo clic i **App** cartella.</span><span class="sxs-lookup"><span data-stu-id="dd08d-173">Single click the **App** folder.</span></span>
    * <span data-ttu-id="dd08d-174">Premere **Seleziona cartella.**</span><span class="sxs-lookup"><span data-stu-id="dd08d-174">Press **Select Folder.**</span></span>
    * <span data-ttu-id="dd08d-175">**Attendere il completamento della compilazione**</span><span class="sxs-lookup"><span data-stu-id="dd08d-175">**Wait for the build to complete**</span></span>
    * <span data-ttu-id="dd08d-176">Nella finestra di Esplora file che viene visualizzato, esplorare il **App** cartella.</span><span class="sxs-lookup"><span data-stu-id="dd08d-176">In the file explorer window that appears, navigate into the **App** folder.</span></span>
    * <span data-ttu-id="dd08d-177">Fare doppio clic su **SharedMixedReality.sln** per avviare Visual Studio</span><span class="sxs-lookup"><span data-stu-id="dd08d-177">Double-click **SharedMixedReality.sln** to launch Visual Studio</span></span>
* <span data-ttu-id="dd08d-178">Compilazione da Visual Studio</span><span class="sxs-lookup"><span data-stu-id="dd08d-178">Build From Visual Studio</span></span>
    * <span data-ttu-id="dd08d-179">La barra degli strumenti superiore Cambia destinazione per **Release** e **x86**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-179">Using the top toolbar change target to **Release** and **x86**.</span></span>
    * <span data-ttu-id="dd08d-180">Fare clic sulla freccia accanto a **computer locale** e selezionare **dispositivo** distribuire a HoloLens</span><span class="sxs-lookup"><span data-stu-id="dd08d-180">Click the arrow next to **Local Machine** and select **Device** to deploy to HoloLens</span></span>
    * <span data-ttu-id="dd08d-181">Fare clic sulla freccia accanto a **periferica** e selezionare **computer locale** da distribuire per il visore VR realtà mista.</span><span class="sxs-lookup"><span data-stu-id="dd08d-181">Click the arrow next to **Device** and select **Local Machine** to deploy for the mixed reality headset.</span></span>
    * <span data-ttu-id="dd08d-182">Fare clic su **Debug -> Avvia senza eseguire debug** oppure **CTRL + F5** per avviare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-182">Click **Debug->Start Without Debugging** or **Control+F5** to start the application.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="dd08d-183">Il codice nei dettagli</span><span class="sxs-lookup"><span data-stu-id="dd08d-183">Digging into the code</span></span>

<span data-ttu-id="dd08d-184">Nel Pannello di progetto, passare a **Assets\HoloToolkit\Input\Scripts\Utilities** e fare doppio clic **MixedRealityCameraManager.cs** per aprirlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-184">In the project panel, navigate to **Assets\HoloToolkit\Input\Scripts\Utilities** and double click **MixedRealityCameraManager.cs** to open it.</span></span>

<span data-ttu-id="dd08d-185">**Panoramica:** MixedRealityCameraManager.cs è uno script semplice che consente di regolare le impostazioni di sfondo e a livello di qualità in base al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-185">**Overview:** MixedRealityCameraManager.cs is a simple script that adjusts quality level and background settings based on the device.</span></span> <span data-ttu-id="dd08d-186">Chiave di seguito è riportato HolographicSettings.IsDisplayOpaque, che consente a uno script per rilevare se il dispositivo è un HoloLens (IsDisplayOpaque restituisce false) o un visore VR immersivi (IsDisplayOpaque restituisce true).</span><span class="sxs-lookup"><span data-stu-id="dd08d-186">Key here is HolographicSettings.IsDisplayOpaque, which allows a script to detect if the device is a HoloLens (IsDisplayOpaque returns false) or an immersive headset (IsDisplayOpaque returns true).</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="dd08d-187">Sfrutta i vantaggi dello stato di avanzamento</span><span class="sxs-lookup"><span data-stu-id="dd08d-187">Enjoy your progress</span></span>

<span data-ttu-id="dd08d-188">A questo punto l'applicazione verrà semplicemente eseguito il rendering ologramma.</span><span class="sxs-lookup"><span data-stu-id="dd08d-188">At this point the application will just render a hologram.</span></span> <span data-ttu-id="dd08d-189">In un secondo momento si aggiungerà l'interazione a di ologramma.</span><span class="sxs-lookup"><span data-stu-id="dd08d-189">We will add interaction to the hologram later.</span></span> <span data-ttu-id="dd08d-190">Entrambi i dispositivi verranno eseguito il rendering di ologramma lo stesso.</span><span class="sxs-lookup"><span data-stu-id="dd08d-190">Both devices will render the hologram the same.</span></span> <span data-ttu-id="dd08d-191">Il visore VR immersivi inoltre il rendering di uno sfondo blu sky e cloud.</span><span class="sxs-lookup"><span data-stu-id="dd08d-191">The immersive headset will also render a blue sky and clouds background.</span></span>

## <a name="chapter-2---interaction"></a><span data-ttu-id="dd08d-192">Capitolo 2: interazione</span><span class="sxs-lookup"><span data-stu-id="dd08d-192">Chapter 2 - Interaction</span></span>

>[!VIDEO https://www.youtube.com/embed/Lrb1y4sQRvI]

### <a name="objectives"></a><span data-ttu-id="dd08d-193">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="dd08d-193">Objectives</span></span>

<span data-ttu-id="dd08d-194">Viene illustrato come gestire gli input per un'applicazione di realtà mista di Windows.</span><span class="sxs-lookup"><span data-stu-id="dd08d-194">Show how to handle input for a Windows Mixed Reality application.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="dd08d-195">Che cosa verrà compilata</span><span class="sxs-lookup"><span data-stu-id="dd08d-195">What we will build</span></span>

<span data-ttu-id="dd08d-196">Compila l'applicazione dal capitolo 1, si aggiungeranno funzionalità per consentire all'utente di prelevare l'ologrammi e inserirlo in un'area del mondo reale in HoloLens o in una tabella virtuale in un visore VR immersivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-196">Building on the application from chapter 1, we will add functionality to allow the user to pick up the hologram and place it on a real world surface in HoloLens or on a virtual table in an immersive headset.</span></span>

<span data-ttu-id="dd08d-197">**Input processo di aggiornamento:** Su HoloLens è il movimento di seleziona il **puntato**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-197">**Input Refresher:** On HoloLens the select gesture is the **air tap**.</span></span> <span data-ttu-id="dd08d-198">In coinvolgenti auricolari, si userà il **oggetto** pulsante sul controller Xbox.</span><span class="sxs-lookup"><span data-stu-id="dd08d-198">On immersive headsets, we will use the **A** button on the Xbox controller.</span></span> <span data-ttu-id="dd08d-199">Per altre informazioni sull'input [iniziare da qui](gestures.md).</span><span class="sxs-lookup"><span data-stu-id="dd08d-199">For more information on input [start here](gestures.md).</span></span>

### <a name="steps"></a><span data-ttu-id="dd08d-200">Passaggi</span><span class="sxs-lookup"><span data-stu-id="dd08d-200">Steps</span></span>
* <span data-ttu-id="dd08d-201">Aggiungi il gestore di Input</span><span class="sxs-lookup"><span data-stu-id="dd08d-201">Add Input manager</span></span>
    * <span data-ttu-id="dd08d-202">Dal **HoloToolkit > Input > Prefabs** trascinare **InputManager** al **gerarchia** come elemento figlio **responsabili**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-202">From **HoloToolkit > Input > Prefabs** drag **InputManager** to **Hierarchy** as a child of **Managers**.</span></span>
    * <span data-ttu-id="dd08d-203">Dal **HoloToolkit > Input > Prefabs > cursore** trascinare **cursore** al **gerarchia**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-203">From **HoloToolkit > Input > Prefabs > Cursor** drag **Cursor** to **Hierarchy**.</span></span>
* <span data-ttu-id="dd08d-204">Aggiungi Mapping spaziale</span><span class="sxs-lookup"><span data-stu-id="dd08d-204">Add Spatial Mapping</span></span>
    * <span data-ttu-id="dd08d-205">Dal **HoloToolkit > SpatialMapping > Prefabs** trascinare **SpatialMapping** al **gerarchia**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-205">From **HoloToolkit > SpatialMapping > Prefabs** drag **SpatialMapping** to **Hierarchy**.</span></span>
* <span data-ttu-id="dd08d-206">Aggiungere Playspace virtuale</span><span class="sxs-lookup"><span data-stu-id="dd08d-206">Add Virtual Playspace</span></span>
    * <span data-ttu-id="dd08d-207">Nelle **gerarchia** espandere **MixedRealityCameraParent** selezionare **limite**</span><span class="sxs-lookup"><span data-stu-id="dd08d-207">In **Hierarchy** expand **MixedRealityCameraParent** select **Boundary**</span></span>
    * <span data-ttu-id="dd08d-208">Nelle **Inspector** pannello selezionare la casella per abilitare **limite**</span><span class="sxs-lookup"><span data-stu-id="dd08d-208">In **Inspector** panel check the box to enable **Boundary**</span></span>
    * <span data-ttu-id="dd08d-209">Dal **AppPrefabs** trascinare **VRRoom** al **gerarchia**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-209">From **AppPrefabs** drag **VRRoom** to **Hierarchy**.</span></span>
* <span data-ttu-id="dd08d-210">Add WorldAnchorManager</span><span class="sxs-lookup"><span data-stu-id="dd08d-210">Add WorldAnchorManager</span></span>
    * <span data-ttu-id="dd08d-211">Nelle **gerarchia**, selezionare **responsabili**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-211">In **Hierarchy**, Select **Managers**.</span></span>
    * <span data-ttu-id="dd08d-212">Nelle **Inspector**, fare clic su **Add Component**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-212">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="dd08d-213">Tipo di **World ancoraggio Manager**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-213">Type **World Anchor Manager**.</span></span>
    * <span data-ttu-id="dd08d-214">Selezionare **World ancoraggio Manager** per aggiungerlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-214">Select **World Anchor Manager** to add it.</span></span>
* <span data-ttu-id="dd08d-215">Aggiungere TapToPlace all'isola di</span><span class="sxs-lookup"><span data-stu-id="dd08d-215">Add TapToPlace to the Island</span></span>
    * <span data-ttu-id="dd08d-216">Nelle **gerarchia**, espandere **isola**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-216">In **Hierarchy**, expand **Island**.</span></span>
    * <span data-ttu-id="dd08d-217">Selezionare **MixedRealityLand**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-217">Select **MixedRealityLand**.</span></span>
    * <span data-ttu-id="dd08d-218">Nelle **Inspector**, fare clic su **Add Component**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-218">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="dd08d-219">Tipo di **toccare per posizione** e selezionarlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-219">Type **Tap To Place** and select it.</span></span>
    * <span data-ttu-id="dd08d-220">Controllare **posizionare padre al tocco**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-220">Check **Place Parent On Tap**.</span></span>
    * <span data-ttu-id="dd08d-221">Impostare **Offset di posizionamento** al **(0, 0, 0,1)**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-221">Set **Placement Offset** to **(0, 0.1, 0)**.</span></span>
* <span data-ttu-id="dd08d-222">Salvare e compilare come indicato in precedenza</span><span class="sxs-lookup"><span data-stu-id="dd08d-222">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="dd08d-223">Il codice nei dettagli</span><span class="sxs-lookup"><span data-stu-id="dd08d-223">Digging into the code</span></span>

<span data-ttu-id="dd08d-224">**1 - GamepadInput.cs lo script**</span><span class="sxs-lookup"><span data-stu-id="dd08d-224">**Script 1 - GamepadInput.cs**</span></span>

<span data-ttu-id="dd08d-225">Nel pannello Progetto spostarsi **Assets\HoloToolkit\Input\Scripts\InputSources** e fare doppio clic **GamepadInput.cs** per aprirlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-225">In the project panel navigate to **Assets\HoloToolkit\Input\Scripts\InputSources** and double click **GamepadInput.cs** to open it.</span></span> <span data-ttu-id="dd08d-226">Dallo stesso percorso nel Pannello di progetto, anche fare doppio clic **InteractionSourceInputSource.cs**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-226">From the same path in the project panel, also double click **InteractionSourceInputSource.cs**.</span></span>

<span data-ttu-id="dd08d-227">Si noti che entrambi gli script hanno una classe di base comune, BaseInputSource.</span><span class="sxs-lookup"><span data-stu-id="dd08d-227">Note that both scripts have a common base class, BaseInputSource.</span></span>

<span data-ttu-id="dd08d-228">BaseInputSource mantiene un riferimento a un InputManager, che consente a uno script per attivare gli eventi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-228">BaseInputSource keeps a reference to an InputManager, which allows a script to trigger events.</span></span> <span data-ttu-id="dd08d-229">In questo caso, l'evento InputClicked è rilevante.</span><span class="sxs-lookup"><span data-stu-id="dd08d-229">In this case, the InputClicked event is relevant.</span></span> <span data-ttu-id="dd08d-230">Questo è importante da ricordare quando si arriva alla script 2, TapToPlace.</span><span class="sxs-lookup"><span data-stu-id="dd08d-230">This will be important to remember when we get to script 2, TapToPlace.</span></span> <span data-ttu-id="dd08d-231">Nel caso di GamePadInput, si esegue il polling per il pulsante sul controller per la pressione, quindi viene generato l'evento InputClicked.</span><span class="sxs-lookup"><span data-stu-id="dd08d-231">In the case of GamePadInput, we poll for the A button on the controller to be pressed, then we raise the InputClicked event.</span></span> <span data-ttu-id="dd08d-232">Nel caso di InteractionSourceInputSource, generare l'evento InputClicked in risposta al TappedEvent.</span><span class="sxs-lookup"><span data-stu-id="dd08d-232">In the case of InteractionSourceInputSource, we raise the InputClicked event in response to the TappedEvent.</span></span>

<span data-ttu-id="dd08d-233">**Script 2: TapToPlace.cs**</span><span class="sxs-lookup"><span data-stu-id="dd08d-233">**Script 2 - TapToPlace.cs**</span></span>

<span data-ttu-id="dd08d-234">Nel pannello Progetto spostarsi **Assets\HoloToolkit\SpatialMapping\Scripts** e fare doppio clic **TapToPlace.cs** per aprirlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-234">In the project panel navigate to **Assets\HoloToolkit\SpatialMapping\Scripts** and double click **TapToPlace.cs** to open it.</span></span>

<span data-ttu-id="dd08d-235">La prima cosa da molti sviluppatori di implementare quando si crea un'applicazione Holographic passerà Vntana con input di movimento.</span><span class="sxs-lookup"><span data-stu-id="dd08d-235">The first thing many developers want to implement when creating a Holographic application is moving Holograms with gesture input.</span></span> <span data-ttu-id="dd08d-236">Di conseguenza, è stata endeavored commentare attentamente questo script.</span><span class="sxs-lookup"><span data-stu-id="dd08d-236">As such, we've endeavored to thoroughly comment this script.</span></span> <span data-ttu-id="dd08d-237">Alcune operazioni sono opportuno evidenziare per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-237">A few things are worth highlighting for this tutorial.</span></span>

<span data-ttu-id="dd08d-238">In primo luogo, si noti che TapToPlace implementa IInputClickHandler.</span><span class="sxs-lookup"><span data-stu-id="dd08d-238">First, note that TapToPlace implements IInputClickHandler.</span></span> <span data-ttu-id="dd08d-239">IInputClickHandler espone le funzioni che gestiscono l'evento InputClicked generato GamePadInput.cs o InteractionSourceInputSource.cs.</span><span class="sxs-lookup"><span data-stu-id="dd08d-239">IInputClickHandler exposes the functions that handle the InputClicked event raised by GamePadInput.cs or InteractionSourceInputSource.cs.</span></span> <span data-ttu-id="dd08d-240">OnInputClicked viene chiamato quando un BaseInputSource rileva un clic, mentre l'oggetto con TapToPlace è in stato attivo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-240">OnInputClicked is called when a BaseInputSource detects a click while the object with TapToPlace is in focus.</span></span> <span data-ttu-id="dd08d-241">Airtapping su HoloLens o premendo il pulsante sul controller Xbox attiverà l'evento.</span><span class="sxs-lookup"><span data-stu-id="dd08d-241">Either airtapping on HoloLens or pressing the A button on the Xbox controller will trigger the event.</span></span>

<span data-ttu-id="dd08d-242">In secondo luogo, se il codice verrà eseguito in update per verificare se un'area viene analizzata in modo che è possibile inserire l'oggetto gioco su una superficie, ad esempio una tabella.</span><span class="sxs-lookup"><span data-stu-id="dd08d-242">Second is the code be executed in update to see if a surface is being looked at so we can place the game object on a surface, like a table.</span></span> <span data-ttu-id="dd08d-243">Il visore VR immersivi non hanno un concetto di superfici reali, pertanto, l'oggetto che rappresenta l'inizio di tabella (Vroom > TableThingy > cubo) è stato contrassegnato con il livello di fisica SpatialMapping, pertanto il raggio di eseguire il cast in aggiornamento entrerà in conflitto con la parte superiore di tabella virtuale.</span><span class="sxs-lookup"><span data-stu-id="dd08d-243">The immersive headset doesn't have a concept of real surfaces, so the object that represents the table top (Vroom > TableThingy > Cube) has been marked with the SpatialMapping physics layer, so the ray cast in Update will collide with the virtual table top.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="dd08d-244">Sfrutta i vantaggi dello stato di avanzamento</span><span class="sxs-lookup"><span data-stu-id="dd08d-244">Enjoy your progress</span></span>

<span data-ttu-id="dd08d-245">Questa volta è possibile selezionare l'isola per spostarlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-245">This time you can select the island to move it.</span></span> <span data-ttu-id="dd08d-246">HoloLens è possibile spostare l'isola di in una superficie reale.</span><span class="sxs-lookup"><span data-stu-id="dd08d-246">On HoloLens you can move the island to a real surface.</span></span> <span data-ttu-id="dd08d-247">Nel visore VR immersivi è possibile spostare l'isola per la tabella virtuale che è stata aggiunta.</span><span class="sxs-lookup"><span data-stu-id="dd08d-247">In the immersive headset you can move the island to the virtual table we added.</span></span>

## <a name="chapter-3---sharing"></a><span data-ttu-id="dd08d-248">Capitolo 3 - condivisione</span><span class="sxs-lookup"><span data-stu-id="dd08d-248">Chapter 3 - Sharing</span></span>

>[!VIDEO https://www.youtube.com/embed/1diycJvxfDc]

### <a name="objectives"></a><span data-ttu-id="dd08d-249">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="dd08d-249">Objectives</span></span>

<span data-ttu-id="dd08d-250">Assicurarsi che la rete sia configurata correttamente e in dettaglio come ancoraggi spaziali vengono condivise tra i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-250">Ensure that the network is correctly configured and detail how spatial anchors are shared between devices.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="dd08d-251">Che cosa verrà compilata</span><span class="sxs-lookup"><span data-stu-id="dd08d-251">What we will build</span></span>

<span data-ttu-id="dd08d-252">Si convertirà il progetto a un progetto per più giocatori.</span><span class="sxs-lookup"><span data-stu-id="dd08d-252">We will convert our project to a multiplayer project.</span></span> <span data-ttu-id="dd08d-253">Si aggiungerà dell'interfaccia utente e per la logica per le sessioni di host o join.</span><span class="sxs-lookup"><span data-stu-id="dd08d-253">We will add UI and logic to host or join sessions.</span></span> <span data-ttu-id="dd08d-254">HoloLens gli utenti vedranno tra loro nella sessione con cloud su mentalmente, e gli utenti visore VR immersivi nelle vicinanze in cui è il punto di ancoraggio cloud.</span><span class="sxs-lookup"><span data-stu-id="dd08d-254">HoloLens users will see each other in the session with clouds over their heads, and immersive headset users have clouds near to where the anchor is.</span></span> <span data-ttu-id="dd08d-255">Gli utenti di auricolari immersive visualizzeranno gli utenti di HoloLens relative all'origine della scena.</span><span class="sxs-lookup"><span data-stu-id="dd08d-255">Users in the immersive headsets will see the HoloLens users relative to the origin of the scene.</span></span> <span data-ttu-id="dd08d-256">Gli utenti di HoloLens verranno visualizzato l'ologrammi dell'isola di nella stessa posizione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-256">HoloLens users will all see the hologram of the island in the same place.</span></span> <span data-ttu-id="dd08d-257">È importante notare che gli utenti delle cuffie immersive potrebbe non essere isola durante questo capitolo, ma si comporterà in modo molto simile a HoloLens, con una visualizzazione aerea dell'isola di.</span><span class="sxs-lookup"><span data-stu-id="dd08d-257">It is key to note that the users in the immersive headsets will not be on the island during this chapter, but will behave very similarly to HoloLens, with a birds eye view of the island.</span></span>

### <a name="steps"></a><span data-ttu-id="dd08d-258">Passaggi</span><span class="sxs-lookup"><span data-stu-id="dd08d-258">Steps</span></span>
* <span data-ttu-id="dd08d-259">Rimuovi isola e VRRoom</span><span class="sxs-lookup"><span data-stu-id="dd08d-259">Remove Island and VRRoom</span></span>
    * <span data-ttu-id="dd08d-260">Nelle **gerarchia** fare doppio clic su **isola** selezionare **Delete**</span><span class="sxs-lookup"><span data-stu-id="dd08d-260">In **Hierarchy** right-click **Island** select **Delete**</span></span>
    * <span data-ttu-id="dd08d-261">Nella **gerarchia** destro **VRRoom** selezionare **Delete**</span><span class="sxs-lookup"><span data-stu-id="dd08d-261">In **Hierarchy** right-click **VRRoom** select **Delete**</span></span>
* <span data-ttu-id="dd08d-262">Aggiungere Usland</span><span class="sxs-lookup"><span data-stu-id="dd08d-262">Add Usland</span></span>
    * <span data-ttu-id="dd08d-263">Dal **AppPrefabs** trascinare **Usland** al **gerarchia**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-263">From **AppPrefabs** drag **Usland** to **Hierarchy**.</span></span>
* <span data-ttu-id="dd08d-264">Dal **AppPrefabs** ognuna delle seguenti operazioni per trascinare **gerarchia**:</span><span class="sxs-lookup"><span data-stu-id="dd08d-264">From **AppPrefabs** drag each of the following to **Hierarchy**:</span></span>
    * <span data-ttu-id="dd08d-265">**UNETSharingStage**</span><span class="sxs-lookup"><span data-stu-id="dd08d-265">**UNETSharingStage**</span></span>
    * <span data-ttu-id="dd08d-266">**UNetAnchorRoot**</span><span class="sxs-lookup"><span data-stu-id="dd08d-266">**UNetAnchorRoot**</span></span>
    * <span data-ttu-id="dd08d-267">**UIContainer**</span><span class="sxs-lookup"><span data-stu-id="dd08d-267">**UIContainer**</span></span>
    * <span data-ttu-id="dd08d-268">**DebugPanelButton**</span><span class="sxs-lookup"><span data-stu-id="dd08d-268">**DebugPanelButton**</span></span>
* <span data-ttu-id="dd08d-269">Salvare e compilare come indicato in precedenza</span><span class="sxs-lookup"><span data-stu-id="dd08d-269">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="dd08d-270">Il codice nei dettagli</span><span class="sxs-lookup"><span data-stu-id="dd08d-270">Digging into the code</span></span>

<span data-ttu-id="dd08d-271">Nel Pannello di progetto, passare a **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** e fare doppio clic su **UnetAnchorManager.cs**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-271">In the project panel, navigate to **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** and double-click on **UnetAnchorManager.cs**.</span></span> <span data-ttu-id="dd08d-272">La possibilità per uno HoloLens condividere le informazioni di rilevamento con HoloLens un altro modo che entrambi i dispositivi possono condividere lo stesso spazio è quasi magiche presenti.</span><span class="sxs-lookup"><span data-stu-id="dd08d-272">The ability for one HoloLens to share tracking information with another HoloLens such that both devices can share the same space is near magical.</span></span> <span data-ttu-id="dd08d-273">La potenza di realtà mista deriva attiva quando due o più persone possono collaborare con gli stessi dati digitali.</span><span class="sxs-lookup"><span data-stu-id="dd08d-273">The power of mixed reality comes alive when two or more people can collaborate using the same digital data.</span></span>

<span data-ttu-id="dd08d-274">Alcuni aspetti da notare in questo script:</span><span class="sxs-lookup"><span data-stu-id="dd08d-274">A few things to point out in this script:</span></span>

<span data-ttu-id="dd08d-275">Nella funzione di avvio, si noti che la verifica della presenza **IsDisplayOpaque**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-275">In the start function, notice the check for **IsDisplayOpaque**.</span></span> <span data-ttu-id="dd08d-276">In questo caso, abbiamo fingendo che il punto di ancoraggio è stata stabilita.</span><span class="sxs-lookup"><span data-stu-id="dd08d-276">In this case, we pretend that the Anchor is established.</span></span> <span data-ttu-id="dd08d-277">Questo avviene perché le cuffie coinvolgenti per non esporre un modo per importare o esportare gli ancoraggi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-277">This is because the immersive headsets do not expose a way to import or export anchors.</span></span> <span data-ttu-id="dd08d-278">Se in esecuzione un HoloLens, tuttavia, questo script implementa gli ancoraggi condivisione tra i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-278">If we are running on a HoloLens, however, this script implements sharing anchors between the devices.</span></span> <span data-ttu-id="dd08d-279">Il dispositivo che avvia la sessione verrà creato un ancoraggio per l'esportazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-279">The device that starts the session will create an anchor for exporting.</span></span> <span data-ttu-id="dd08d-280">Il dispositivo che partecipa a una sessione richiederà l'ancoraggio dal dispositivo che ha avviato la sessione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-280">The device that joins a session will request the anchor from the device that started the session.</span></span>

<span data-ttu-id="dd08d-281">**L'esportazione:**</span><span class="sxs-lookup"><span data-stu-id="dd08d-281">**Exporting:**</span></span>

<span data-ttu-id="dd08d-282">Quando un utente crea una sessione, NetworkDiscoveryWithAnchors chiamerà UNETAnchorManagers CreateAnchor (funzione).</span><span class="sxs-lookup"><span data-stu-id="dd08d-282">When a user creates a session, NetworkDiscoveryWithAnchors will call UNETAnchorManagers CreateAnchor function.</span></span> <span data-ttu-id="dd08d-283">È possibile seguire CreateAnchor flusso.</span><span class="sxs-lookup"><span data-stu-id="dd08d-283">Let's follow CreateAnchor flow.</span></span>

<span data-ttu-id="dd08d-284">È innanzitutto necessario effettuare alcune attività di manutenzione, cancellare tutti i dati che si potrà avere raccolti i punti di ancoraggio precedente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-284">We start by doing some housekeeping, clearing out any data we may have collected for previous anchors.</span></span> <span data-ttu-id="dd08d-285">Controlliamo quindi se non c'è un ancoraggio memorizzati nella cache da caricare.</span><span class="sxs-lookup"><span data-stu-id="dd08d-285">Then we check if there is a cached anchor to load.</span></span> <span data-ttu-id="dd08d-286">I dati di ancoraggio tendono a essere compreso tra 5 e 20 MB, in modo da riutilizzare gli ancoraggi memorizzato nella cache è possibile salvare sulla quantità di dati che ci servono per il trasferimento in rete.</span><span class="sxs-lookup"><span data-stu-id="dd08d-286">The anchor data tends to be between 5 and 20 MB, so reusing cached anchors can save on the amount of data we need to transfer over the network.</span></span> <span data-ttu-id="dd08d-287">Si vedrà come funziona un po' più avanti.</span><span class="sxs-lookup"><span data-stu-id="dd08d-287">We'll see how this works a bit later.</span></span> <span data-ttu-id="dd08d-288">Anche se si sta riutilizzando il punto di ancoraggio, è necessario ottenere dati pronti nel caso in cui viene aggiunto un nuovo client che non hanno il punto di ancoraggio l'ancoraggio.</span><span class="sxs-lookup"><span data-stu-id="dd08d-288">Even if we are reusing the anchor, we need to get the anchor data ready in case a new client joins that doesn't have the anchor.</span></span>

<span data-ttu-id="dd08d-289">Parlando di preparazione dei dati di ancoraggio, la classe WorldAnchorTransferBatch espone la funzionalità per preparare i dati di ancoraggio per l'invio a un altro dispositivo o dell'applicazione e la funzionalità per importare i dati di ancoraggio.</span><span class="sxs-lookup"><span data-stu-id="dd08d-289">Speaking of getting the anchor data ready, the WorldAnchorTransferBatch class exposes the functionality to prepare anchor data for sending to another device or application and the functionality to import the anchor data.</span></span> <span data-ttu-id="dd08d-290">Poiché si usa il percorso di esportazione, verrà aggiunto il nostro ancoraggio per il WorldAnchorTransferBatch e chiamare la funzione ExportAsync.</span><span class="sxs-lookup"><span data-stu-id="dd08d-290">Since we're on the export path, we will add our anchor to the WorldAnchorTransferBatch and call the ExportAsync function.</span></span> <span data-ttu-id="dd08d-291">ExportAsync verrà quindi chiamato il callback WriteBuffer, in quanto genera i dati da esportare.</span><span class="sxs-lookup"><span data-stu-id="dd08d-291">ExportAsync will then call the WriteBuffer callback as it generates data for export.</span></span> <span data-ttu-id="dd08d-292">Quando tutti i dati sono state esportate ExportComplete verrà chiamato.</span><span class="sxs-lookup"><span data-stu-id="dd08d-292">When all of the data has been exported ExportComplete will be called.</span></span> <span data-ttu-id="dd08d-293">In WriteBuffer il blocco di dati viene aggiunto a un elenco che richiedono la conservazione per l'esportazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-293">In WriteBuffer we add the chunk of data to a list we keep for exporting.</span></span> <span data-ttu-id="dd08d-294">In ExportComplete convertiamo l'elenco in una matrice.</span><span class="sxs-lookup"><span data-stu-id="dd08d-294">In ExportComplete we convert the list to an array.</span></span> <span data-ttu-id="dd08d-295">La variabile AnchorName è impostata per richiedere l'ancoraggio, se non si hanno che attivano altri dispositivi anche.</span><span class="sxs-lookup"><span data-stu-id="dd08d-295">The AnchorName variable is also set, which will trigger other devices to request the anchor if they don't have it.</span></span>

<span data-ttu-id="dd08d-296">In alcuni casi il punto di ancoraggio non esporta o creerà così pochi dati che si eseguirà un nuovo tentativo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-296">In some cases the anchor won't export or will create so little data that we will try again.</span></span> <span data-ttu-id="dd08d-297">In questo caso è sufficiente chiamare CreateAnchor nuovamente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-297">Here we just call CreateAnchor again.</span></span>

<span data-ttu-id="dd08d-298">Una funzione finale nel percorso di esportazione è AnchorFoundRemotely.</span><span class="sxs-lookup"><span data-stu-id="dd08d-298">A final function in the export path is AnchorFoundRemotely.</span></span> <span data-ttu-id="dd08d-299">Quando un altro dispositivo consente di trovare il punto di ancoraggio, tale dispositivo indicherà l'host e l'host che verrà utilizzato come un segnale che il punto di ancoraggio è un punto di ancoraggio valido"" e può essere memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="dd08d-299">When another device finds the anchor, that device will tell the host, and the host will use that as a signal that the anchor is a "good anchor" and can be cached.</span></span>

<span data-ttu-id="dd08d-300">**L'importazione:**</span><span class="sxs-lookup"><span data-stu-id="dd08d-300">**Importing:**</span></span>

<span data-ttu-id="dd08d-301">Quando un HoloLens partecipa a una sessione, è necessario importare un ancoraggio.</span><span class="sxs-lookup"><span data-stu-id="dd08d-301">When a HoloLens joins a session, it needs to import an anchor.</span></span> <span data-ttu-id="dd08d-302">Nella funzione di aggiornamento del UNETAnchorManager, viene eseguito il polling di AnchorName.</span><span class="sxs-lookup"><span data-stu-id="dd08d-302">In UNETAnchorManager's Update function, the AnchorName is polled.</span></span> <span data-ttu-id="dd08d-303">Quando viene modificato il nome dell'ancoraggio, inizia il processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-303">When the anchor name changes, the import process begins.</span></span> <span data-ttu-id="dd08d-304">In primo luogo, si tenta di caricare il punto di ancoraggio con il nome specificato dall'archivio locale di ancoraggio.</span><span class="sxs-lookup"><span data-stu-id="dd08d-304">First, we try to load the anchor with the specified name from the local anchor store.</span></span> <span data-ttu-id="dd08d-305">Se è già stato fatto, è possibile usarlo senza scaricare nuovamente i dati.</span><span class="sxs-lookup"><span data-stu-id="dd08d-305">If we already have it, we can use it without downloading the data again.</span></span> <span data-ttu-id="dd08d-306">Se è non disponibile, chiamiamo il metodo WaitForAnchor che avvierà il download.</span><span class="sxs-lookup"><span data-stu-id="dd08d-306">If we don't have it, then we call WaitForAnchor which will initiate the download.</span></span>

<span data-ttu-id="dd08d-307">Quando viene completato il download, viene chiamato NetworkTransmitter_dataReadyEvent.</span><span class="sxs-lookup"><span data-stu-id="dd08d-307">When the download is completed, NetworkTransmitter_dataReadyEvent is called.</span></span> <span data-ttu-id="dd08d-308">Ciò segnalerà il ciclo di aggiornamento per chiamare ImportAsync con i dati scaricati.</span><span class="sxs-lookup"><span data-stu-id="dd08d-308">This will signal the Update loop to call ImportAsync with the downloaded data.</span></span> <span data-ttu-id="dd08d-309">ImportAsync chiamerà ImportComplete durante il processo di importazione è stato completato.</span><span class="sxs-lookup"><span data-stu-id="dd08d-309">ImportAsync will call ImportComplete when the import process is complete.</span></span> <span data-ttu-id="dd08d-310">Se l'importazione ha esito positivo, il punto di ancoraggio verrà salvato nell'archivio locale di Windows Media player.</span><span class="sxs-lookup"><span data-stu-id="dd08d-310">If the import is successful, the anchor will be saved in the local player store.</span></span> <span data-ttu-id="dd08d-311">PlayerController.cs rende effettivamente la chiamata a AnchorFoundRemotely per informare l'host che un buon punto di ancoraggio è stata stabilita.</span><span class="sxs-lookup"><span data-stu-id="dd08d-311">PlayerController.cs actually makes the call to AnchorFoundRemotely to let the host know that a good anchor has been established.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="dd08d-312">Sfrutta i vantaggi dello stato di avanzamento</span><span class="sxs-lookup"><span data-stu-id="dd08d-312">Enjoy your progress</span></span>

<span data-ttu-id="dd08d-313">Questa volta un utente con un HoloLens ospiterà una sessione utilizzando il **avviare la sessione** pulsante nell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-313">This time a user with a HoloLens will host a session using the **start session** button in the UI.</span></span> <span data-ttu-id="dd08d-314">Gli altri utenti, sia su HoloLens o un visore VR immersivi, verranno selezionare la sessione e quindi selezionare il **partecipare sessione** pulsante nell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-314">Other users, both on HoloLens or an immersive headset, will select the session and then select the **join session** button in the UI.</span></span> <span data-ttu-id="dd08d-315">Se si dispone di più utenti con dispositivi HoloLens, hanno cloud rosso su mentalmente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-315">If you have multiple people with HoloLens devices, they will have red clouds over their heads.</span></span> <span data-ttu-id="dd08d-316">Ci sarà un cloud blu per ogni visore VR immersivi, ma i cloud blu non sarà sopra le cuffie, come le cuffie non siano tentando di trovare lo spazio delle coordinate world dei dispositivi HoloLens.</span><span class="sxs-lookup"><span data-stu-id="dd08d-316">There will also be a blue cloud for each immersive headset, but the blue clouds will not be above the headsets, as the headsets are not trying to find the same world coordinate space as the HoloLens devices.</span></span>

<span data-ttu-id="dd08d-317">Questo punto il progetto è un'applicazione di condivisione indipendente; non esegue molte operazioni e potrebbe essere utilizzato come una linea di base.</span><span class="sxs-lookup"><span data-stu-id="dd08d-317">This point in the project is a contained sharing application; it doesn't do very much, and could act as a baseline.</span></span> <span data-ttu-id="dd08d-318">Nei capitoli successivi, si inizierà la creazione di un'esperienza per le persone a guardare.</span><span class="sxs-lookup"><span data-stu-id="dd08d-318">In the next chapters, we will start building an experience for people to enjoy.</span></span> <span data-ttu-id="dd08d-319">Per ottenere un'ulteriore materiale sussidiario sulla progettazione di condividere esperienze, fare clic qui.</span><span class="sxs-lookup"><span data-stu-id="dd08d-319">To get further guidance on shared experience design, go here.</span></span>

## <a name="chapter-4---immersion-and-teleporting"></a><span data-ttu-id="dd08d-320">Capitolo 4 - full Immersion e teleporting</span><span class="sxs-lookup"><span data-stu-id="dd08d-320">Chapter 4 - Immersion and teleporting</span></span>

>[!VIDEO https://www.youtube.com/embed/kUHZ5tCOfvY]

### <a name="objectives"></a><span data-ttu-id="dd08d-321">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="dd08d-321">Objectives</span></span>

<span data-ttu-id="dd08d-322">Soddisfa le esigenze dell'esperienza per ogni tipo di dispositivo di realtà mista.</span><span class="sxs-lookup"><span data-stu-id="dd08d-322">Cater the experience to each type of mixed reality device.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="dd08d-323">Che cosa verrà compilata</span><span class="sxs-lookup"><span data-stu-id="dd08d-323">What we will build</span></span>

<span data-ttu-id="dd08d-324">Si aggiornerà l'applicazione per inserire gli utenti visore VR immersivi isola con una visualizzazione coinvolgente e concreto.</span><span class="sxs-lookup"><span data-stu-id="dd08d-324">We will update the application to put immersive headset users on the island with an immersive view.</span></span> <span data-ttu-id="dd08d-325">HoloLens continueranno ad avere la vista aerea dell'isola.</span><span class="sxs-lookup"><span data-stu-id="dd08d-325">HoloLens users will still have the bird's eye view of the island.</span></span> <span data-ttu-id="dd08d-326">Gli utenti di ogni tipo di dispositivo possono visualizzare gli altri utenti come appaiono in tutto il mondo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-326">Users of each device type can see other users as they appear in the world.</span></span> <span data-ttu-id="dd08d-327">Ad esempio, gli utenti visore VR immersivi possono vedere l'altro avatar in altri percorsi isola e vedono gli utenti di HoloLens come cloud di grandi dimensioni di sopra dell'isola.</span><span class="sxs-lookup"><span data-stu-id="dd08d-327">For instance, immersive headset users can see the other avatars on other paths on the island, and they see the HoloLens users as giant clouds above the island.</span></span> <span data-ttu-id="dd08d-328">Visore VR immersivi il cursore di ray sguardo dell'utente HoloLens verrà inoltre visualizzato se l'utente di HoloLens sta guardando l'isola.</span><span class="sxs-lookup"><span data-stu-id="dd08d-328">Immersive headset users will also see the cursor of the HoloLens user's gaze ray if the HoloLens user is looking at the island.</span></span> <span data-ttu-id="dd08d-329">Gli utenti di HoloLens visualizzeranno un avatar dell'isola per rappresentare ogni utente visore VR immersivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-329">HoloLens users will see an avatar on the island to represent each immersive headset user.</span></span>

<span data-ttu-id="dd08d-330">**Aggiornato Input per il dispositivo Immersive:**</span><span class="sxs-lookup"><span data-stu-id="dd08d-330">**Updated Input for the Immersive device:**</span></span>
* <span data-ttu-id="dd08d-331">I pulsanti di chiusura e respingenti a destra a sinistra nel controller Xbox ruotare Windows Media player</span><span class="sxs-lookup"><span data-stu-id="dd08d-331">The left bumper and right bumper buttons on the Xbox controller rotate the player</span></span>
* <span data-ttu-id="dd08d-332">Tenendo premuto il pulsante Y sul controller Xbox consentirà una [teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) cursore.</span><span class="sxs-lookup"><span data-stu-id="dd08d-332">Holding the Y button on the Xbox controller will enable a [teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) cursor.</span></span> <span data-ttu-id="dd08d-333">Se il cursore è un indicatore rotante quando si rilascia il pulsante Y, si sarà teleported alla posizione del cursore.</span><span class="sxs-lookup"><span data-stu-id="dd08d-333">If the cursor has a spinning arrow indicator when you release the Y button, you will be teleported to the cursor's location.</span></span>

### <a name="steps"></a><span data-ttu-id="dd08d-334">Passaggi</span><span class="sxs-lookup"><span data-stu-id="dd08d-334">Steps</span></span>
* <span data-ttu-id="dd08d-335">Add MixedRealityTeleport to MixedRealityCameraParent</span><span class="sxs-lookup"><span data-stu-id="dd08d-335">Add MixedRealityTeleport to MixedRealityCameraParent</span></span>
    * <span data-ttu-id="dd08d-336">Nelle **gerarchia**, selezionare **Usland**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-336">In **Hierarchy**, select **Usland**.</span></span>
    * <span data-ttu-id="dd08d-337">Nelle **Inspector**, abilitare **a livello di controllo**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-337">In **Inspector**, enable **Level Control**.</span></span>
    * <span data-ttu-id="dd08d-338">Nelle **gerarchia**, selezionare **MixedRealityCameraParent**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-338">In **Hierarchy**, select **MixedRealityCameraParent**.</span></span>
    * <span data-ttu-id="dd08d-339">Nelle **Inspector**, fare clic su **Add Component**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-339">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="dd08d-340">Tipo di **Teleport realtà mista** e selezionarlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-340">Type **Mixed Reality Teleport** and select it.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="dd08d-341">Il codice nei dettagli</span><span class="sxs-lookup"><span data-stu-id="dd08d-341">Digging into the code</span></span>

<span data-ttu-id="dd08d-342">Gli utenti visore VR immersivi sarà possibile con tethering i PC con un cavo, ma l'isola è maggiore di quanto è lungo il cavo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-342">Immersive headset users will be tethered to their PCs with a cable, but our island is larger than the cable is long.</span></span> <span data-ttu-id="dd08d-343">Per compensare la modifica, è necessario avere la possibilità di spostare la camera indipendentemente dal movimento dell'utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-343">To compensate, we need the ability to move the camera independently of the user's motion.</span></span> <span data-ttu-id="dd08d-344">Vedere le [pagina comfort](comfort.md) per altre informazioni sulla progettazione dell'applicazione di realtà mista (in particolare self movimento e locomotion).</span><span class="sxs-lookup"><span data-stu-id="dd08d-344">Please see the [comfort page](comfort.md) for more information about designing your mixed reality application (in particular self motion and locomotion).</span></span>

<span data-ttu-id="dd08d-345">Per descrivere questo processo sarà utile definire due termini.</span><span class="sxs-lookup"><span data-stu-id="dd08d-345">In order to describe this process it will be useful to define two terms.</span></span> <span data-ttu-id="dd08d-346">Prima di tutto **carrello** sarà l'oggetto che consente di spostare la fotocamera in modo indipendente da parte dell'utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-346">First, **dolly** will be the object that moves the camera independently from the user.</span></span> <span data-ttu-id="dd08d-347">Un oggetto gioco figlio del **carrello** sarà il **fotocamera principale**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-347">A child game object of the **dolly** will be the **main camera**.</span></span> <span data-ttu-id="dd08d-348">La fotocamera principale è collegata all'inizio dell'utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-348">The main camera is attached to the user's head.</span></span>

<span data-ttu-id="dd08d-349">Nel Pannello di progetto, passare a **Assets\AppPrefabs\Support\Scripts\GameLogic** e fare doppio clic su **MixedRealityTeleport.cs**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-349">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **MixedRealityTeleport.cs**.</span></span>

<span data-ttu-id="dd08d-350">MixedRealityTeleport ha due compiti.</span><span class="sxs-lookup"><span data-stu-id="dd08d-350">MixedRealityTeleport has two jobs.</span></span> <span data-ttu-id="dd08d-351">In primo luogo, che gestisce la rotazione usando paraurti.</span><span class="sxs-lookup"><span data-stu-id="dd08d-351">First, it handles rotation using the bumpers.</span></span> <span data-ttu-id="dd08d-352">Nella funzione di aggiornamento è eseguire il polling per 'ButtonUp' LeftBumper e RightBumper.</span><span class="sxs-lookup"><span data-stu-id="dd08d-352">In the update function we poll for 'ButtonUp' on LeftBumper and RightBumper.</span></span> <span data-ttu-id="dd08d-353">GetButtonUp restituisce true solo sul primo frame di che un pulsante è rilasciato dopo essere stata verso il basso.</span><span class="sxs-lookup"><span data-stu-id="dd08d-353">GetButtonUp only returns true on the first frame a button is up after having been down.</span></span> <span data-ttu-id="dd08d-354">Se dei pulsanti fosse stato generato, quindi sappiamo che l'utente deve eseguire la rotazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-354">If either button had been raised, then we know the user needs to rotate.</span></span>

<span data-ttu-id="dd08d-355">Quando si ruota Microsoft un effetto di dissolvenza e usando uno script semplice denominato 'di dissolvenza controllo' di dissolvenza.</span><span class="sxs-lookup"><span data-stu-id="dd08d-355">When we rotate we do a fade out and fade in using a simple script called 'fade control'.</span></span> <span data-ttu-id="dd08d-356">È utile per impedire all'utente di visualizzare un movimento non naturale che potrebbe causare disturbo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-356">We do this to prevent the user from seeing an unnatural movement which could lead to discomfort.</span></span> <span data-ttu-id="dd08d-357">L'effetto di dissolvenza in entrata e in uscita effetto è piuttosto semplice.</span><span class="sxs-lookup"><span data-stu-id="dd08d-357">The fade in and out effect is fairly simple.</span></span> <span data-ttu-id="dd08d-358">Abbiamo un quadrato nero sporgenti davanti il **fotocamera principale**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-358">We have a black quad hanging in front of the **main camera**.</span></span> <span data-ttu-id="dd08d-359">Quando dissolvenza in uscita è passare il valore alfa da 0 a 1.</span><span class="sxs-lookup"><span data-stu-id="dd08d-359">When fading out we transition the alpha value from 0 to 1.</span></span> <span data-ttu-id="dd08d-360">In questo modo gradualmente i pixel neri del quadrato per eseguire il rendering e nascondere qualsiasi elemento su cui si basano.</span><span class="sxs-lookup"><span data-stu-id="dd08d-360">This gradually causes the black pixels of the quad to render and obscure anything behind them.</span></span> <span data-ttu-id="dd08d-361">Quando a dissolvenza nella transizione il valore alfa su zero.</span><span class="sxs-lookup"><span data-stu-id="dd08d-361">When fading back in we transition the alpha value back to zero.</span></span>

<span data-ttu-id="dd08d-362">Quando si calcola la rotazione, tenere presente che si sta rotazione nostri **carrello** ma calcolando la rotazione intorno al **fotocamera principale**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-362">When we calculate the rotation, note that we are rotating our **dolly** but calculating the rotation around the **main camera**.</span></span> <span data-ttu-id="dd08d-363">Questo aspetto è importante come quanto più il **fotocamera principale** è lontano da 0, 0,0, meno precisa una rotazione intorno al carrello diventerebbe dal punto di vista dell'utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-363">This is important as the farther the **main camera** is away from 0,0,0, the less accurate a rotation around the dolly would become from the point of view of the user.</span></span> <span data-ttu-id="dd08d-364">In effetti, se non esegue alcuna rotazione intorno alla posizione della camera, l'utente passerà in un arco tutto il **carrello** anziché la rotazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-364">In fact, if you do not rotate around the camera position, the user will move on an arc around the **dolly** rather than rotating.</span></span>

<span data-ttu-id="dd08d-365">Il secondo processo per MixedRealityTeleport consiste nel gestire lo spostamento di **carrello**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-365">The second job for MixedRealityTeleport is to handle moving the **dolly**.</span></span> <span data-ttu-id="dd08d-366">Questa operazione viene eseguita in SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="dd08d-366">This is done in SetWorldPosition.</span></span> <span data-ttu-id="dd08d-367">SetWorldPosition accetta la posizione globale desiderato, la posizione in cui l'utente desidera percieve che si occupino.</span><span class="sxs-lookup"><span data-stu-id="dd08d-367">SetWorldPosition takes the desired world position, the position where the user wants to percieve that they inhabit.</span></span> <span data-ttu-id="dd08d-368">È necessario inserire nostri **carrello** in tale posizione meno alla posizione locale del **fotocamera principale**, come offset verrà aggiunti ogni fotogramma.</span><span class="sxs-lookup"><span data-stu-id="dd08d-368">We need to put our **dolly** at that position minus the local position of the **main camera**, as that offset will be added each frame.</span></span>

<span data-ttu-id="dd08d-369">Un secondo script chiama SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="dd08d-369">A second script calls SetWorldPosition.</span></span> <span data-ttu-id="dd08d-370">Esaminiamo lo script.</span><span class="sxs-lookup"><span data-stu-id="dd08d-370">Let's look at that script.</span></span> <span data-ttu-id="dd08d-371">Nel Pannello di progetto, passare a **Assets\AppPrefabs\Support\Scripts\GameLogic** e fare doppio clic su **TeleportScript.cs**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-371">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **TeleportScript.cs**.</span></span>

<span data-ttu-id="dd08d-372">Questo script è un po' più complesso del MixedRealityTeleport.</span><span class="sxs-lookup"><span data-stu-id="dd08d-372">This script is a little more involved than MixedRealityTeleport.</span></span> <span data-ttu-id="dd08d-373">Lo script controlla per il pulsante di Y sul controller Xbox venga mantenuto.</span><span class="sxs-lookup"><span data-stu-id="dd08d-373">The script is checking for the Y Button on the Xbox controller to be held down.</span></span> <span data-ttu-id="dd08d-374">Mentre è attivo il pulsante verso il basso un teleport viene eseguito il rendering di cursore e lo script esegue il cast di un raggio da posizione sguardo dell'utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-374">While the button is held down a teleport cursor is rendered and the script casts a ray from the user's gaze position.</span></span> <span data-ttu-id="dd08d-375">Se tale ray è in conflitto con un'area che è più o meno verso l'alto, l'area viene considerato una superficie di buon teleport a e l'animazione sul cursore teleport verrà abilitata.</span><span class="sxs-lookup"><span data-stu-id="dd08d-375">If that ray collides with a surface that is more or less pointing up, the surface will be considered a good surface to teleport to, and the animation on the teleport cursor will be enabled.</span></span> <span data-ttu-id="dd08d-376">Se il raggio non entri in conflitto con una superficie maggiore o minore puntamento verso l'alto, quindi verrà disabilitata l'animazione sul cursore.</span><span class="sxs-lookup"><span data-stu-id="dd08d-376">If the ray does not collide with a surface more or less pointing up, then the animation on the cursor will be disabled.</span></span> <span data-ttu-id="dd08d-377">Quando viene rilasciato il pulsante Y e il punto del raggio calcolato è una posizione valida, lo script chiama SetWorldPosition con la posizione del raggio intersecato.</span><span class="sxs-lookup"><span data-stu-id="dd08d-377">When the Y button is released and the calculated point of the ray is a valid position, the script calls SetWorldPosition with the position the ray intersected.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="dd08d-378">Sfrutta i vantaggi dello stato di avanzamento</span><span class="sxs-lookup"><span data-stu-id="dd08d-378">Enjoy your progress</span></span>

<span data-ttu-id="dd08d-379">Questa volta è necessario trovare un amico.</span><span class="sxs-lookup"><span data-stu-id="dd08d-379">This time you'll need to find a friend.</span></span>

<span data-ttu-id="dd08d-380">Ancora una volta, un utente con il HoloLens ospiterà una sessione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-380">Once again, a user with the HoloLens will host a session.</span></span> <span data-ttu-id="dd08d-381">Gli altri utenti verranno partecipare alla sessione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-381">Other users will join the session.</span></span> <span data-ttu-id="dd08d-382">L'applicazione verrà posizionati i primi tre agli utenti di accedere da un visore VR immersivi su uno dei tre percorsi dell'isola.</span><span class="sxs-lookup"><span data-stu-id="dd08d-382">The application will place the first three users to join from an immersive headset on one of the three paths on the island.</span></span> <span data-ttu-id="dd08d-383">È possibile esplorare l'isola di questa sezione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-383">Feel free to explore the island in this section.</span></span>

<span data-ttu-id="dd08d-384">Dettagli da notare:</span><span class="sxs-lookup"><span data-stu-id="dd08d-384">Details to notice:</span></span>
1. <span data-ttu-id="dd08d-385">È possibile visualizzare i volti nel cloud, consentendo di un utente immerso vedere direzione in cui un utente di HoloLens è alla ricerca.</span><span class="sxs-lookup"><span data-stu-id="dd08d-385">You can see faces in the clouds, which helps an immersed user see which direction a HoloLens user is looking.</span></span>
2. <span data-ttu-id="dd08d-386">L'avatar dell'isola hanno necks che ruotano.</span><span class="sxs-lookup"><span data-stu-id="dd08d-386">The avatars on the island have necks that rotate.</span></span> <span data-ttu-id="dd08d-387">Non seguono svolte l'utente è realtà reale (non abbiamo informazioni), ma rende un'interessante esperienza.</span><span class="sxs-lookup"><span data-stu-id="dd08d-387">They won't follow what the user is doing is real reality (we don't have that information) but it makes for a nice experience.</span></span>
3. <span data-ttu-id="dd08d-388">Se l'utente di HoloLens è esaminando l'isola, gli utenti immerso possono vedere il cursore.</span><span class="sxs-lookup"><span data-stu-id="dd08d-388">If the HoloLens user is looking at the Island, the immersed users can see their cursor.</span></span>
4. <span data-ttu-id="dd08d-389">I cloud che rappresentano gli utenti di HoloLens ombre.</span><span class="sxs-lookup"><span data-stu-id="dd08d-389">The clouds that represent the HoloLens users cast shadows.</span></span>

## <a name="chapter-5---finale"></a><span data-ttu-id="dd08d-390">Capitolo 5 - Finale</span><span class="sxs-lookup"><span data-stu-id="dd08d-390">Chapter 5 - Finale</span></span>

>[!VIDEO https://www.youtube.com/embed/n_HDWJbfpNg]

### <a name="objectives"></a><span data-ttu-id="dd08d-391">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="dd08d-391">Objectives</span></span>

<span data-ttu-id="dd08d-392">Creare un'esperienza interattiva di collaborazione tra i tipi di due dispositivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-392">Create a collaborative interactive experience between the two device types.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="dd08d-393">Che cosa verrà compilata</span><span class="sxs-lookup"><span data-stu-id="dd08d-393">What we will build</span></span>

<span data-ttu-id="dd08d-394">Compila il capitolo 4, quando un utente con un visore VR immersivi Ottiene quasi un puzzle isola, gli utenti di HoloLens otterrà una descrizione comando con un'indicazione del puzzle.</span><span class="sxs-lookup"><span data-stu-id="dd08d-394">Building on chapter 4, when a user with an immersive headset gets near a puzzle on the island, the HoloLens users will get a tool tip with a clue to the puzzle.</span></span> <span data-ttu-id="dd08d-395">Una volta nella chat room rocket tutti gli utenti visore VR immersivi ottenere oltre i quesiti e sul riquadro"pronto", verrà avviata la rocket.</span><span class="sxs-lookup"><span data-stu-id="dd08d-395">Once all of the immersive headset users get past their puzzles and onto the "ready pad" in the rocket room, the rocket will launch.</span></span>

### <a name="steps"></a><span data-ttu-id="dd08d-396">Passaggi</span><span class="sxs-lookup"><span data-stu-id="dd08d-396">Steps</span></span>
* <span data-ttu-id="dd08d-397">Nelle **gerarchia**, selezionare **Usland**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-397">In **Hierarchy**, select **Usland**.</span></span>
* <span data-ttu-id="dd08d-398">Nella **Inspector**, nel **a livello di controllo**, controllare **abilitare collaborazione**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-398">In **Inspector**, in **Level Control**, check **Enable Collaboration**.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="dd08d-399">Il codice nei dettagli</span><span class="sxs-lookup"><span data-stu-id="dd08d-399">Digging into the code</span></span>

<span data-ttu-id="dd08d-400">Ora esaminiamo LevelControl.cs.</span><span class="sxs-lookup"><span data-stu-id="dd08d-400">Now let us look at LevelControl.cs.</span></span> <span data-ttu-id="dd08d-401">Questo script costituisce il nucleo della logica del gioco e mantiene lo stato del gioco.</span><span class="sxs-lookup"><span data-stu-id="dd08d-401">This script is the core of the game logic and maintains the game state.</span></span> <span data-ttu-id="dd08d-402">Poiché si tratta di un gioco multiplayer con UNET dobbiamo comprendere il flusso dei dati, almeno così ben per modificare questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="dd08d-402">Since this is a multiplayer game using UNET we need to understand how data flows, at least well enough to modify this tutorial.</span></span> <span data-ttu-id="dd08d-403">Per una panoramica più completa di UNET, consultare la documentazione di Unity.</span><span class="sxs-lookup"><span data-stu-id="dd08d-403">For a more complete overview of UNET, please refer to Unity's documentation.</span></span>

<span data-ttu-id="dd08d-404">Nel Pannello di progetto, passare a **Assets\AppPrefabs\Support\Scripts\GameLogic** e fare doppio clic su **LevelControl.cs**.</span><span class="sxs-lookup"><span data-stu-id="dd08d-404">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **LevelControl.cs**.</span></span>

<span data-ttu-id="dd08d-405">Ecco come un visore VR immersivi indica che essi sono pronti per il lancio di rocket.</span><span class="sxs-lookup"><span data-stu-id="dd08d-405">Let us understand how an immersive headset indicates that they are ready for the rocket launch.</span></span> <span data-ttu-id="dd08d-406">Preparazione avvio Rocket viene comunicato impostando uno dei tre bool in un elenco di bool che corrispondono ai tre percorsi dell'isola.</span><span class="sxs-lookup"><span data-stu-id="dd08d-406">Rocket Launch readiness is communicated by setting one of three bools in a list of bools that correspond to the three paths on the island.</span></span> <span data-ttu-id="dd08d-407">Quando l'utente assegnato al percorso si trova sopra il riquadro marrone all'interno di chat room rocket verrà impostato bool del percorso.</span><span class="sxs-lookup"><span data-stu-id="dd08d-407">A path's bool will be set when the user assigned to the path is on top of the brown pad inside the rocket room.</span></span> <span data-ttu-id="dd08d-408">OK, ora per i dettagli.</span><span class="sxs-lookup"><span data-stu-id="dd08d-408">Okay, now to the details.</span></span>

<span data-ttu-id="dd08d-409">Si inizierà nella funzione Update ().</span><span class="sxs-lookup"><span data-stu-id="dd08d-409">We will start in the Update() function.</span></span> <span data-ttu-id="dd08d-410">Si noti che vi sia una funzione 'cheat'.</span><span class="sxs-lookup"><span data-stu-id="dd08d-410">You will note that there is a 'cheat' function.</span></span> <span data-ttu-id="dd08d-411">Abbiamo utilizzato questo nello sviluppo per testare il lancio di rocket e reimpostazione della sequenza.</span><span class="sxs-lookup"><span data-stu-id="dd08d-411">We used this in development to test the rocket launch and reset sequence.</span></span> <span data-ttu-id="dd08d-412">Non funzionerà nell'esperienza dell'utente con più.</span><span class="sxs-lookup"><span data-stu-id="dd08d-412">It won't work in the multi user experience.</span></span> <span data-ttu-id="dd08d-413">Si spera nel momento in cui che si acquisisce le informazioni seguenti è possibile utilizzarlo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-413">Hopefully by the time you internalize the following infromation you can make it work.</span></span> <span data-ttu-id="dd08d-414">Dopo che è possibile controllare se è opportuno cheat, controlliamo per vedere se è si è immersi il giocatore locale.</span><span class="sxs-lookup"><span data-stu-id="dd08d-414">After we check to see if we should cheat, we check to see if the local player is immersed.</span></span> <span data-ttu-id="dd08d-415">Si vuole concentrare sul modo in cui troviamo che ci troviamo qui l'obiettivo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-415">We want to focus on how we find that we're at the goal.</span></span> <span data-ttu-id="dd08d-416">All'interno di if (si è immersi) controllare, è presente una chiamata a CheckGoal nascoste dietro la **EnableCollaboration** bool.</span><span class="sxs-lookup"><span data-stu-id="dd08d-416">Inside of the if (Immersed) check, there is a call to CheckGoal hiding behind the **EnableCollaboration** bool.</span></span> <span data-ttu-id="dd08d-417">Corrisponde alla casella di controllo che è stata selezionata durante il completamento dei passaggi di questo capitolo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-417">This corresponds to the checkbox you checked while completing the steps for this chapter.</span></span> <span data-ttu-id="dd08d-418">All'interno di EnableCollaboration notiamo una chiamata a CheckGoal().</span><span class="sxs-lookup"><span data-stu-id="dd08d-418">Inside of EnableCollaboration we see a call to CheckGoal().</span></span>

<span data-ttu-id="dd08d-419">CheckGoal esegue alcuni calcoli matematici per vedere se siamo più o meno la condizione nel blocco note.</span><span class="sxs-lookup"><span data-stu-id="dd08d-419">CheckGoal does some math to see if we are more or less standing on the pad.</span></span> <span data-ttu-id="dd08d-420">Quando si sono, è debug. log "Arrivata all'obiettivo" e quindi chiamare 'SendAtGoalMessage()'.</span><span class="sxs-lookup"><span data-stu-id="dd08d-420">When we are, we Debug.Log "Arrived at goal" and then we call 'SendAtGoalMessage()'.</span></span> <span data-ttu-id="dd08d-421">In SendAtGoalMessage chiamiamo playerController.SendAtGoal.</span><span class="sxs-lookup"><span data-stu-id="dd08d-421">In SendAtGoalMessage we call playerController.SendAtGoal.</span></span> <span data-ttu-id="dd08d-422">Per risparmiare tempo, ecco il codice:</span><span class="sxs-lookup"><span data-stu-id="dd08d-422">To save you some time, here's the code:</span></span>

```cs
private void CmdSendAtGoal(int GoalIndex)
       {
           levelState.SetGoalIndex(GoalIndex);
       }
```

```cs
public void SendAtGoal(int GoalIndex)
       {
           if (isLocalPlayer)
           {
               Debug.Log("sending at goal " + GoalIndex);
               CmdSendAtGoal(GoalIndex);
           }
       }
```

<span data-ttu-id="dd08d-423">Si noti che SendAtGoalMessage chiama CmdSendAtGoal, quali levelState.SetGoalIndex chiamate, che viene ripristinato LevelControl.cs.</span><span class="sxs-lookup"><span data-stu-id="dd08d-423">Note that SendAtGoalMessage calls CmdSendAtGoal, which calls levelState.SetGoalIndex, which is back in LevelControl.cs.</span></span> <span data-ttu-id="dd08d-424">A prima vista questa apparentemente anomalo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-424">At first glance this seems strange.</span></span> <span data-ttu-id="dd08d-425">Perché non semplicemente chiamare SetGoalIndex anziché questo strano routing tramite il controller player?</span><span class="sxs-lookup"><span data-stu-id="dd08d-425">Why not just call SetGoalIndex rather than this strange routing through the player controller?</span></span> <span data-ttu-id="dd08d-426">Il motivo è che si sta conforme al modello dati che UNET viene utilizzato per mantenere sincronizzati i dati. Per evitare comportamenti scorretti e thrashing, UNET richiede che ogni oggetto dispone di un utente che dispone dell'autorità di modificare le variabili sincronizzate.</span><span class="sxs-lookup"><span data-stu-id="dd08d-426">The reason is that we are conforming to the data model UNET uses to keep data in sync. To prevent cheating and thrashing, UNET requires that each object has a user who has authority to change the synchronized variables.</span></span> <span data-ttu-id="dd08d-427">Inoltre, solo l'host (l'utente che ha avviato la sessione) può modificare i dati direttamente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-427">Further, only the host (the user that started the session) can change data directly.</span></span> <span data-ttu-id="dd08d-428">Gli utenti che non sono host, ma dispongono di autorità, è necessario inviare un 'command' nell'host e modificare la variabile.</span><span class="sxs-lookup"><span data-stu-id="dd08d-428">Users who are not the host, but have authority, need to send a 'command' to the host which will change the variable.</span></span> <span data-ttu-id="dd08d-429">Per impostazione predefinita l'host ha autorità su tutti gli oggetti, a eccezione dell'oggetto generato per rappresentare l'utente.</span><span class="sxs-lookup"><span data-stu-id="dd08d-429">By default the host has authority over all objects, except for the object spawned to represent the user.</span></span> <span data-ttu-id="dd08d-430">In questo caso l'oggetto con lo script playercontroller.</span><span class="sxs-lookup"><span data-stu-id="dd08d-430">In our case this object has the playercontroller script.</span></span> <span data-ttu-id="dd08d-431">È possibile richiedere l'autorità per un oggetto e quindi apportare le modifiche, ma si sceglie di sfruttare il fatto che il controller player è Self-comandi autorità e route tramite il controller player.</span><span class="sxs-lookup"><span data-stu-id="dd08d-431">There is a way to request authority for an object and then make changes, but we choose to leverage the fact that the player controller has self authority and route commands through the player controller.</span></span>

<span data-ttu-id="dd08d-432">In altri termini, quando abbiamo scoperto noi stessi al nostro obiettivo, il giocatore deve riuscire ad indicare all'host e host indicherà tutti gli altri utenti.</span><span class="sxs-lookup"><span data-stu-id="dd08d-432">Said another way, when we've found ourselves at our goal, the player needs to tell the host, and the host will tell everyone else.</span></span>

<span data-ttu-id="dd08d-433">Tornare in LevelControl.cs SetGoalIndex sguardo.</span><span class="sxs-lookup"><span data-stu-id="dd08d-433">Back in LevelControl.cs look at SetGoalIndex.</span></span> <span data-ttu-id="dd08d-434">Qui viene impostato il valore di un valore in un synclist (AtGoal).</span><span class="sxs-lookup"><span data-stu-id="dd08d-434">Here we are setting the value of a value in a synclist (AtGoal).</span></span> <span data-ttu-id="dd08d-435">Tenere presente che si sono nel contesto dell'host mentre questa operazione viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="dd08d-435">Remember that we are in the context of the host while we do this.</span></span> <span data-ttu-id="dd08d-436">Analogamente a un comando, una chiamata RPC è qualcosa può emettere l'host che faranno Sì tutti i client di eseguire il codice.</span><span class="sxs-lookup"><span data-stu-id="dd08d-436">Similar to a command, an RPC is something the host can issue that will cause all clients to run some code.</span></span> <span data-ttu-id="dd08d-437">Qui definiamo 'RpcCheckAllGoals'.</span><span class="sxs-lookup"><span data-stu-id="dd08d-437">Here we call 'RpcCheckAllGoals'.</span></span> <span data-ttu-id="dd08d-438">Ogni client singolarmente verificare se tutti i tre AtGoals sono impostate e in questo caso, avviare il rocket.</span><span class="sxs-lookup"><span data-stu-id="dd08d-438">Each client will individually check to see if all three AtGoals are set, and if so, launch the rocket.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="dd08d-439">Sfrutta i vantaggi dello stato di avanzamento</span><span class="sxs-lookup"><span data-stu-id="dd08d-439">Enjoy your progress</span></span>

<span data-ttu-id="dd08d-440">Compila nel capitolo precedente, si inizierà la sessione come prima.</span><span class="sxs-lookup"><span data-stu-id="dd08d-440">Building on the previous chapter, we will start the session as before.</span></span> <span data-ttu-id="dd08d-441">Questa volta, gli utenti in get visore VR immersivi da "porta" nel loro percorso, verrà visualizzata una descrizione comando che è possono visualizzare solo gli utenti di HoloLens.</span><span class="sxs-lookup"><span data-stu-id="dd08d-441">This time as the users in the immersive headset get to the "door" on their path, a tooltip will appear that only the HoloLens users can see.</span></span> <span data-ttu-id="dd08d-442">Gli utenti di HoloLens sono responsabili per la comunicazione questa indicazione per gli utenti nel visore VR immersivi.</span><span class="sxs-lookup"><span data-stu-id="dd08d-442">The HoloLens users are responsible for communicating this clue to the users in the immersive headset.</span></span> <span data-ttu-id="dd08d-443">Il rocket avvierà nello spazio dopo ogni avatar ha allontanato il tastierino marrone corrispondente all'interno di Vulcano.</span><span class="sxs-lookup"><span data-stu-id="dd08d-443">The rocket will launch to space once each avatar has stepped on its corresponding brown pad inside the volcano.</span></span> <span data-ttu-id="dd08d-444">La scena verrà reimpostato dopo 60 secondi in modo che è possibile farlo anche in questo caso.</span><span class="sxs-lookup"><span data-stu-id="dd08d-444">The scene will reset after 60 seconds so you can do it again.</span></span>

## <a name="see-also"></a><span data-ttu-id="dd08d-445">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="dd08d-445">See also</span></span>
* [<span data-ttu-id="dd08d-446">Input di MR 213: Controller di movimento</span><span class="sxs-lookup"><span data-stu-id="dd08d-446">MR Input 213: Motion controllers</span></span>](mixed-reality-213.md)
