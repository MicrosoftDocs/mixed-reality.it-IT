---
title: 5. Aggiunta di un pulsante e ripristino delle posizioni dei pezzi
description: Parte 5 di un'esercitazione per la creazione di una semplice app di scacchi con Unreal Engine 4 e il plug-in UX Tools di Mixed Reality Toolkit
author: sw5813
ms.author: suwu
ms.date: 5/5/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, realtà mista, esercitazione, guida introduttiva, mrtk, uxt, UX Tools, documentazione
ms.openlocfilehash: 77fe2b59db970a2ac4b531d69efec6794478f7d5
ms.sourcegitcommit: 09d9fa153cd9072f60e33a5f83ced8167496fcd7
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 05/18/2020
ms.locfileid: "83519993"
---
# <a name="5-adding-a-button--resetting-piece-locations"></a><span data-ttu-id="e47da-104">5. Aggiunta di un pulsante e ripristino delle posizioni dei pezzi</span><span class="sxs-lookup"><span data-stu-id="e47da-104">5. Adding a button & resetting piece locations</span></span>

<span data-ttu-id="e47da-105">In questa sezione si continua a illustrare le funzionalità del plug-in Mixed Reality Toolkit UX Tools e a creare le funzionalità dell'app di scacchi.</span><span class="sxs-lookup"><span data-stu-id="e47da-105">This section continues demonstrating the capabilities of the Mixed Reality Toolkit UX Tools plugin and building out the features of your chess app.</span></span> <span data-ttu-id="e47da-106">Si creerà una nuova funzione e si imparerà a trasferire i riferimenti agli attori dal proprio livello a un progetto.</span><span class="sxs-lookup"><span data-stu-id="e47da-106">You’ll create a new function and learn how to get references to Actors from your Level into a Blueprint.</span></span>

## <a name="objectives"></a><span data-ttu-id="e47da-107">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="e47da-107">Objectives</span></span>

* <span data-ttu-id="e47da-108">Aggiungere un pulsante a un progetto</span><span class="sxs-lookup"><span data-stu-id="e47da-108">Add a button to your project</span></span>
* <span data-ttu-id="e47da-109">Creare una nuova funzione "Reset Location" (Ripristina posizione) che ripristina la posizione originale di un pezzo</span><span class="sxs-lookup"><span data-stu-id="e47da-109">Create a new “Reset Location” function that sends a piece back to its original location</span></span>
* <span data-ttu-id="e47da-110">Associare il pulsante in modo che attivi la funzione appena creata quando viene premuto</span><span class="sxs-lookup"><span data-stu-id="e47da-110">Hook the button up to trigger the newly created function when pressed</span></span>

## <a name="create-a-function-to-reset-location"></a><span data-ttu-id="e47da-111">Creare una funzione per ripristinare la posizione</span><span class="sxs-lookup"><span data-stu-id="e47da-111">Create a function to reset location</span></span>

1.  <span data-ttu-id="e47da-112">Apri **WhiteKing**.</span><span class="sxs-lookup"><span data-stu-id="e47da-112">Open **WhiteKing**.</span></span> <span data-ttu-id="e47da-113">Nel pannello **My Blueprint** (Progetto personale) fai clic sul pulsante "+" accanto alla sezione **Functions** (Funzioni) per creare una nuova funzione.</span><span class="sxs-lookup"><span data-stu-id="e47da-113">In the **My Blueprint** panel, click the “+” button next to the **Functions** section to create a new function.</span></span> <span data-ttu-id="e47da-114">Assegna alla funzione il nome "Reset Location" (Ripristina posizione).</span><span class="sxs-lookup"><span data-stu-id="e47da-114">Name this function “Reset Location”.</span></span> 

2.  <span data-ttu-id="e47da-115">Nel progetto **Reset Location** (Ripristina posizione) appena creato, trascina il pin di esecuzione e rilascialo in un punto qualsiasi della griglia del progetto per chiamare un nodo **SetActorRelativeTransform**.</span><span class="sxs-lookup"><span data-stu-id="e47da-115">In your newly created **Reset Location** Blueprint, drag the execution pin and release anywhere on the Blueprint grid to call a **SetActorRelativeTransform** node.</span></span> <span data-ttu-id="e47da-116">Questa funzione imposta la trasformazione (posizione, rotazione e scala) di un attore rispetto al relativo elemento padre.</span><span class="sxs-lookup"><span data-stu-id="e47da-116">This function sets the transform (location, rotation, and scale) of an actor relative to its parent.</span></span> <span data-ttu-id="e47da-117">Questa funzione verrà usata per ripristinare la posizione del Re sulla scacchiera, anche se è stata spostata dalla posizione originale.</span><span class="sxs-lookup"><span data-stu-id="e47da-117">We’ll use this function to reset the king’s position on the board, even if the board has been moved from its original position.</span></span> <span data-ttu-id="e47da-118">Crea un nodo **Make Transform** (Esegui trasformazione) nella posizione X = -26, Y = 4, Z = 0 e collegalo all'input New Relative Transform (Nuova trasformazione relativa).</span><span class="sxs-lookup"><span data-stu-id="e47da-118">Create a **Make Transform** node with Location X = -26, Y = 4, Z = 0, and connect it to the New Relative Transform input.</span></span> 

![Funzione di ripristino della posizione](images/unreal-uxt/5-function.PNG)

3.  <span data-ttu-id="e47da-120">Compila e salva **WhiteKing**.</span><span class="sxs-lookup"><span data-stu-id="e47da-120">Compile and Save **WhiteKing**.</span></span> <span data-ttu-id="e47da-121">Torna alla finestra principale.</span><span class="sxs-lookup"><span data-stu-id="e47da-121">Return to the Main window.</span></span> 

## <a name="add-a-button"></a><span data-ttu-id="e47da-122">Aggiungere un pulsante</span><span class="sxs-lookup"><span data-stu-id="e47da-122">Add a button</span></span>

1.  <span data-ttu-id="e47da-123">Nella cartella **Blueprints** (Progetti) crea un nuovo progetto che costituisca una sottoclasse di SimpleButton.</span><span class="sxs-lookup"><span data-stu-id="e47da-123">In your **Blueprints** folder, create a new Blueprint that subclasses SimpleButton.</span></span> <span data-ttu-id="e47da-124">SimpleButton è un Blueprint Actor (attore di progetto) di un pulsante 3D fornito con il plug-in UX Tools.</span><span class="sxs-lookup"><span data-stu-id="e47da-124">SimpleButton is a 3D button Blueprint Actor that is provided as part of the UX Tools plugin.</span></span> <span data-ttu-id="e47da-125">Assegna al pulsante il nome "ResetButton" e fai doppio clic per aprire il progetto.</span><span class="sxs-lookup"><span data-stu-id="e47da-125">Name this button “ResetButton” and double click to open the Blueprint.</span></span> 

![Creare il nuovo progetto come sottoclasse di SimpleButton](images/unreal-uxt/5-subclass.PNG)

2.  <span data-ttu-id="e47da-127">Nel pannello **Components** (Componenti ) fai clic su **PressableButton (Inherited)** (PressableButton - Ereditato).</span><span class="sxs-lookup"><span data-stu-id="e47da-127">In the **Components** panel, click on **PressableButton (Inherited)**.</span></span> <span data-ttu-id="e47da-128">Nel pannello dei dettagli scorri fino alla sezione **Events** (Eventi).</span><span class="sxs-lookup"><span data-stu-id="e47da-128">In the Details panel, scroll until you see the **Events** section.</span></span> <span data-ttu-id="e47da-129">Fai clic sul pulsante con il segno più verde accanto a **On Button Pressed** (Alla pressione del pulsante). In questo modo, verrà aggiunto un evento **On Button Pressed** (Alla pressione del pulsante) al grafico degli eventi, che verrà chiamato ogni volta che viene premuto il pulsante.</span><span class="sxs-lookup"><span data-stu-id="e47da-129">Click the green plus button next to **On Button Pressed**- this will add an **On Button Pressed** event to the Event Graph, which will be called when the button is pressed.</span></span> <span data-ttu-id="e47da-130">Da qui è possibile chiamare la funzione di ripristino della posizione di WhiteKing.</span><span class="sxs-lookup"><span data-stu-id="e47da-130">From here, we’ll want to call our WhiteKing’s Reset Location function.</span></span> <span data-ttu-id="e47da-131">A questo scopo, sarà prima necessario ottenere un riferimento all'attore WhiteKing nel livello in uso.</span><span class="sxs-lookup"><span data-stu-id="e47da-131">To do this, we’ll first need to get a reference to the WhiteKing Actor in our Level.</span></span> 

3.  <span data-ttu-id="e47da-132">Nel pannello **My Blueprint** (Progetto personale), trova la sezione **Variables** (Variabili) e fai clic sul pulsante **+** per aggiungere una nuova variabile.</span><span class="sxs-lookup"><span data-stu-id="e47da-132">In the **My Blueprint** panel, find the **Variables** section and click the **+** button to add a new variable.</span></span> <span data-ttu-id="e47da-133">Assegna alla variabile il nome "WhiteKing".</span><span class="sxs-lookup"><span data-stu-id="e47da-133">Name this variable “WhiteKing”.</span></span> <span data-ttu-id="e47da-134">Nel pannello dei dettagli seleziona l'elenco a discesa accanto a **Variable Type** (Tipo di variabile), cerca "WhiteKing" e seleziona **Object Reference** (Riferimento oggetto).</span><span class="sxs-lookup"><span data-stu-id="e47da-134">In the Details panel, select the dropdown next to **Variable Type**, search for “WhiteKing”, and select the **Object Reference**.</span></span> <span data-ttu-id="e47da-135">Seleziona infine la casella accanto a **Instance Editable** (Istanza modificabile).</span><span class="sxs-lookup"><span data-stu-id="e47da-135">Finally, check the box next to **Instance Editable**.</span></span> <span data-ttu-id="e47da-136">In questo modo la variabile potrà essere impostata dal livello principale.</span><span class="sxs-lookup"><span data-stu-id="e47da-136">This will allow the variable to be set from the Main Level.</span></span> 

![Creazione di una variabile](images/unreal-uxt/5-var.PNG)

4.  <span data-ttu-id="e47da-138">Trascina la variabile WhiteKing da **My Blueprint > Variables** (Progetto personale > Variabile) in Reset Button Event Graph (Grafico eventi ResetButton).</span><span class="sxs-lookup"><span data-stu-id="e47da-138">Drag the WhiteKing variable from **My Blueprint > Variables** onto the Reset Button Event Graph.</span></span> <span data-ttu-id="e47da-139">Scegli **Get WhiteKing** (Ottieni WhiteKing).</span><span class="sxs-lookup"><span data-stu-id="e47da-139">Choose **Get WhiteKing**.</span></span> 

5.  <span data-ttu-id="e47da-140">Trascina il pin di output di WhiteKing e rilascialo per inserire un nuovo nodo.</span><span class="sxs-lookup"><span data-stu-id="e47da-140">Drag the WhiteKing output pin and release to place a new node.</span></span> <span data-ttu-id="e47da-141">Seleziona la funzione **Reset Location** (Ripristina posizione).</span><span class="sxs-lookup"><span data-stu-id="e47da-141">Select the **Reset Location** function.</span></span> <span data-ttu-id="e47da-142">Trascina infine il pin di esecuzione in uscita da **On Button Pressed** (Alla pressione del pulsante) al pin di esecuzione in ingresso in **Reset Location** (Ripristina posizione).</span><span class="sxs-lookup"><span data-stu-id="e47da-142">Finally, drag the outgoing execution pin from **On Button Pressed** to the incoming execution pin on **Reset Location**.</span></span> <span data-ttu-id="e47da-143">Fai clic su **Compile** (Compila) e quindi su **Save** (Salva) per salvare il progetto ResetButton e quindi torna alla finestra principale.</span><span class="sxs-lookup"><span data-stu-id="e47da-143">**Compile** and **Save** the ResetButton Blueprint, then return to the Main window.</span></span> 

![Chiamata della funzione di ripristino della posizione alla pressione del pulsante](images/unreal-uxt/5-callresetloc.PNG)

6.  <span data-ttu-id="e47da-145">Trascina **ResetButton** nel viewport e impostane la posizione su X = 50, Y =-25, Z = 10.</span><span class="sxs-lookup"><span data-stu-id="e47da-145">Drag **ResetButton** into the viewport and set its location to X = 50, Y = -25, Z = 10.</span></span> <span data-ttu-id="e47da-146">In **Default** (Valore predefinito) imposta il valore della variabile WhiteKing su **WhiteKing**.</span><span class="sxs-lookup"><span data-stu-id="e47da-146">Under **Default**, set the value of the WhiteKing variable to **WhiteKing**.</span></span>

![Impostazione della variabile](images/unreal-uxt/5-buttonlevel.PNG)

<span data-ttu-id="e47da-148">Disponi ora di un'app di realtà mista con un pezzo degli scacchi afferrabile e una scacchiera, nonché un pulsante completamente funzionante che, quando viene premuto, ripristina la posizione del pezzo.</span><span class="sxs-lookup"><span data-stu-id="e47da-148">You now have a mixed reality app with a grabbable chess piece and board, as well as a fully functioning button that will reset the piece’s location when pressed.</span></span> <span data-ttu-id="e47da-149">L'app completata fino a questo punto è disponibile in [GitHub](https://github.com/microsoft/MixedReality-Unreal-Samples/tree/master/ChessApp).</span><span class="sxs-lookup"><span data-stu-id="e47da-149">The completed app up to this point can be found on [GitHub](https://github.com/microsoft/MixedReality-Unreal-Samples/tree/master/ChessApp).</span></span> <span data-ttu-id="e47da-150">Al termine di questa esercitazione, è possibile andare avanti e configurare gli altri pezzi degli scacchi, in modo che venga ripristinata l'intera scacchiera quando l'utente preme il pulsante.</span><span class="sxs-lookup"><span data-stu-id="e47da-150">Feel free to go beyond this tutorial and set up the remainder of the chess pieces, so that the entire board is reset when the user presses the button.</span></span>

![Schermata finale in viewport](images/unreal-uxt/5-endscene.PNG)

[<span data-ttu-id="e47da-152">Sezione successiva: 6. Creazione di pacchetti e distribuzione nel dispositivo o nell'emulatore</span><span class="sxs-lookup"><span data-stu-id="e47da-152">Next Section: 6. Packaging & deploying to device or emulator</span></span>](unreal-uxt-ch6.md)
