---
title: Modulo MR Learning ASA-Azure Spatial Anchor su HoloLens 2
description: Completa questo corso per informazioni su come implementare il riconoscimento volto di Azure in un'applicazione di realtà mista.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: realtà mista, unity, esercitazione, hololens
ms.openlocfilehash: 80367ed818168c1d642fadbd7316d3d6481dd2a9
ms.sourcegitcommit: 611af6ff7a2412abad80c0c7d4decfc0c3a0e8c8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/17/2019
ms.locfileid: "68293793"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="d9dc9-104">2. Salvataggio, recupero e condivisione di ancoraggi spaziali di Azure</span><span class="sxs-lookup"><span data-stu-id="d9dc9-104">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="d9dc9-105">In questa esercitazione si apprenderà come salvare i nostri ancoraggi spaziali di Azure tra più sessioni di App salvando le informazioni di ancoraggio nel disco di HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-105">In this tutorial, we will learn how to save our Azure Spatial Anchors across multiple app sessions by saving our anchor information to the HoloLens 2's disk.</span></span> <span data-ttu-id="d9dc9-106">Si apprenderà anche come condividere queste informazioni di ancoraggio ad altri dispositivi per un allineamento di ancoraggio a più dispositivi.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-106">We will also learn how to share this anchor information to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="d9dc9-107">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="d9dc9-107">Objectives</span></span>

* <span data-ttu-id="d9dc9-108">Informazioni su come salvare e recuperare le informazioni sull'ancoraggio spaziale di Azure dal disco locale HoloLens 2, per la persistenza tra le sessioni dell'app</span><span class="sxs-lookup"><span data-stu-id="d9dc9-108">Learn how to save and retrieve Azure Spatial Anchor information from the HoloLens 2 local disk, for persistence between app sessions</span></span>

* <span data-ttu-id="d9dc9-109">Informazioni su come condividere le informazioni sull'ancoraggio spaziale di Azure tra gli utenti in uno scenario con più dispositivi</span><span class="sxs-lookup"><span data-stu-id="d9dc9-109">Learn how to share Azure Spatial Anchor information between users in a multi-device scenario</span></span>

## <a name="instructions"></a><span data-ttu-id="d9dc9-110">Istruzioni</span><span class="sxs-lookup"><span data-stu-id="d9dc9-110">Instructions</span></span>

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="d9dc9-111">Mantieni gli ancoraggi di Azure tra le sessioni dell'app-salva l'ID ancoraggio sul disco</span><span class="sxs-lookup"><span data-stu-id="d9dc9-111">Persist Azure Anchors Between App Sessions - Save Anchor ID to Disk</span></span>

1. <span data-ttu-id="d9dc9-112">Cercare e aggiungere la prefabbricazione SaveAnchorToDisk alla scena.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-112">Search for and add the SaveAnchorToDisk prefab to your scene.</span></span> <span data-ttu-id="d9dc9-113">Sono inclusi due pulsanti, un pulsante per salvare tutti gli ID di ancoraggio di Azure disponibili sul disco HoloLens 2 e un altro per recuperare gli ID dal disco.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-113">These include two buttons, one button for saving any available Azure Anchor IDs to the HoloLens 2 disk, and another for retrieving any IDs from the disk.</span></span>

![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. <span data-ttu-id="d9dc9-115">Configurare ciascun pulsante seguendo le istruzioni riportate di seguito</span><span class="sxs-lookup"><span data-stu-id="d9dc9-115">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="d9dc9-116">Per il pulsante denominato SaveToDisk, creare un nuovo evento sotto il trigger di evento premuto pulsante, nonché il trigger di evento clic su.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-116">For the Button named SaveToDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="d9dc9-117">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo SaveAzureAnchorIDToDisk () dal componente ASAmoduleScript dell'oggetto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-117">Drag the ParentAnchor object into the empty field, and assign the SaveAzureAnchorIDToDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>
   
     > <span data-ttu-id="d9dc9-118">Nota: alcuni pulsanti possono apparire sovrapposti agli altri pulsanti della scena.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-118">Note: some of the buttons may appear overlapping the other buttons in the scene.</span></span> <span data-ttu-id="d9dc9-119">È possibile modificare il posizionamento del pulsante.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-119">Feel free to adjust the button's positioning.</span></span>

![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)


   - <span data-ttu-id="d9dc9-123">Per il pulsante denominato GetFromDisk, creare un nuovo evento sotto il trigger di evento premuto pulsante, nonché il trigger di evento clic su.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-123">For the Button named GetFromDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="d9dc9-124">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo LoadAzureAnchorIDsFromDisk () dal componente ASAmoduleScript dell'oggetto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-124">Drag the ParentAnchor object into the empty field, and assign the LoadAzureAnchorIDsFromDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="d9dc9-125">Seguire le istruzioni riportate in Tutoiral 1 per compilare l'applicazione aggiornata nel dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-125">Follow the instructions from Tutoiral 1 to build the updated application to your device.</span></span> <span data-ttu-id="d9dc9-126">Dopo aver premuto il pulsante Crea ancoraggio Azure, come è stato fatto nella lezione precedente, è ora possibile salvare l'ID ancoraggio di Azure su disco premendo il pulsante Salva su disco.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-126">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now save the Azure Anchor ID to disk by pressing the save to disk button.</span></span>

4. <span data-ttu-id="d9dc9-127">Riavviare l'applicazione, avviare la sessione di Azure, premere Load Anchor ID, quindi scegliere Individua Azure Anchor per individuare l'ancoraggio associato all'ID salvato sul disco.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-127">Restart the application, start the Azure Session, Press Load Anchor ID, and then press Locate Azure Anchor to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="d9dc9-128">L'intera scena dovrebbe ora essere posizionata nella posizione in cui è stato salvato in precedenza l'ancoraggio.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-128">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

### <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="d9dc9-129">Condividere gli ancoraggi di Azure tra più dispositivi</span><span class="sxs-lookup"><span data-stu-id="d9dc9-129">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="d9dc9-130">Questa sezione illustra come condividere l'ID ancoraggio di Azure tra più dispositivi.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-130">In this section, we'll learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="d9dc9-131">Questo consentirà a più dispositivi di eseguire query su Azure per lo stesso ID ancoraggio, consentendo agli ologrammi e alle scene ancorati di essere allineati a livello spaziale.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-131">This will allow multiple devices to query Azure for the same anchor ID, allowing our anchored holograms and scenes to be spatially aligned.</span></span> <span data-ttu-id="d9dc9-132">L'allineamento spaziale (visualizzazione degli stessi ologrammi nella stessa posizione fisica tra più dispositivi) è fondamentale per le esperienze condivise locali in HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-132">Spatial alignment (seeing the same holograms in the same physical location between multiple devices) is key to local shared experiences in the HoloLens 2.</span></span> <span data-ttu-id="d9dc9-133">Esistono diversi modi per trasferire le informazioni relative agli ID di Azure tra i dispositivi, inclusi i metodi descritti nelle esercitazioni delle esperienze condivise degli ancoraggi spaziali di Azure (TODO: Add link). Questo esempio usa un semplice servizio Web per caricare e scaricare gli ID di ancoraggio tra i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-133">There are many ways to transfer information regarding azure IDs between devices, including methods outlined in the Azure Spatial Anchors shared experiences tutorials (TODO: add link.) This example uses a simple web service to upload and download Anchor IDs between devices.</span></span>

1. <span data-ttu-id="d9dc9-134">Aggiungere la prefabbricazione ShareAnchor nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-134">Add the ShareAnchor prefab into your hierarchy.</span></span> <span data-ttu-id="d9dc9-135">Questa prefabbricata aggiunge due nuovi pulsanti alla scena. uno per il caricamento delle informazioni sull'ID ancoraggio e un altro per il download delle informazioni sull'ID di ancoraggio.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-135">This prefab adds two new buttons to your scene; one for uploading anchor ID information and another for downloading anchor ID information.</span></span> 

![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. <span data-ttu-id="d9dc9-137">Configurare ciascun pulsante seguendo le istruzioni riportate di seguito</span><span class="sxs-lookup"><span data-stu-id="d9dc9-137">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="d9dc9-138">Per il pulsante denominato SendSharedAnchor, creare un nuovo evento sotto il trigger di evento premuto pulsante, nonché il trigger di evento clic su.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-138">For the Button named, SendSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="d9dc9-139">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo ShareAnchor () dal componente ASAmoduleScript dell'oggetto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-139">Drag the ParentAnchor object into the empty field, and assign the ShareAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

   - <span data-ttu-id="d9dc9-142">Per il pulsante denominato GetSharedAnchor, creare un nuovo evento sotto il trigger di evento premuto pulsante, nonché il trigger di evento clic su.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-142">For the Button named, GetSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="d9dc9-143">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo GetSharedAzureAnchor () dal componente ASAmoduleScript dell'oggetto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-143">Drag the ParentAnchor object into the empty field, and assign the GetSharedAzureAnchor() method from the ParentAnchor object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="d9dc9-144">Seguire le istruzioni dell' [esercitazione 1](mrlearning-base-ch1.md).</span><span class="sxs-lookup"><span data-stu-id="d9dc9-144">Follow the instructions from [Tutorial 1](mrlearning-base-ch1.md).</span></span> <span data-ttu-id="d9dc9-145">per compilare l'applicazione aggiornata nel dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-145">to build the updated application to your device.</span></span> <span data-ttu-id="d9dc9-146">Dopo aver premuto il pulsante Crea ancoraggio Azure, come è stato fatto nella lezione precedente, è ora possibile condividere l'ID di ancoraggio di Azure con altri dispositivi premendo il pulsante Condividi con altro dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-146">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now share the Azure Anchor ID to other devices by pressing the Share To Other Device button.</span></span>

   > <span data-ttu-id="d9dc9-147">Nota: Selezionare l'ancoraggio padre e scorrere verso il basso fino allo script di ancoraggio padre.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-147">Note: Select the parent anchor and scroll down to the parent anchor script.</span></span> <span data-ttu-id="d9dc9-148">Verificare che il pin di condivisione pubblico sia univoco, in modo che, quando lo si condivide, si sappia che si sta condividendo.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-148">Ensure that your public sharing pin is unique, so that when you share it, you know it is yours that you are sharing.</span></span> <span data-ttu-id="d9dc9-149">Potrebbero essere presenti migliaia di utenti che condividono i propri ancoraggi di Azure. in questo modo sarà possibile assicurarsi di condividere gli ancoraggi di Azure corretti.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-149">There could be thousands of users sharing their Azure anchors, so doing this will allow you to ensure you are sharing the correct Azure anchors.</span></span>

4. <span data-ttu-id="d9dc9-150">Se si dispone di un altro dispositivo HoloLens 2, avviare l'applicazione e quindi avviare la sessione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-150">If you have another HoloLens 2 device, start the application and then start the Azure Session.</span></span> <span data-ttu-id="d9dc9-151">Premere il pulsante Get Shared Anchor ID, quindi premere il pulsante Locate Azure Anchor per individuare l'ancoraggio associato all'ID salvato sul disco.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-151">Press the Get Shared Anchor ID button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="d9dc9-152">L'intera scena dovrebbe ora bloccarsi nella posizione, nel punto in cui è stata posizionata sull'altro dispositivo HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-152">The entire scene should now snap into position, at the where it was placed on the other HoloLens 2 device!</span></span> <span data-ttu-id="d9dc9-153">Se è presente un solo HoloLens 2, è comunque possibile testare la funzionalità riavviando l'applicazione, avviando la sessione di Azure e quindi premere il pulsante "Ottieni ID ancoraggio condiviso" e quindi fare clic sul pulsante Individua ancoraggio Azure per individuare l'ancoraggio associato al ID salvato sul disco.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-153">If you only have one HoloLens 2, you may still test functionality by restarting the application, starting the Azure Session, and then Press the "Get Shared Anchor ID" button button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="d9dc9-154">L'intera scena dovrebbe ora essere posizionata nella posizione in cui è stato salvato in precedenza l'ancoraggio.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-154">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="congratulations"></a><span data-ttu-id="d9dc9-155">Lezione completata</span><span class="sxs-lookup"><span data-stu-id="d9dc9-155">Congratulations</span></span>
<span data-ttu-id="d9dc9-156">In questa lezione si è appreso come salvare in modo permanente gli ancoraggi spaziali di Azure tra le sessioni dell'applicazione e i riavvii delle applicazioni salvando l'ID di ancoraggio spaziale di Azure nel disco locale in HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-156">In this Lesson you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens 2.</span></span> <span data-ttu-id="d9dc9-157">Si è anche appreso come condividere gli ancoraggi spaziali di Azure tra più dispositivi per un'esperienza condivisa di base di un ologramma statico multiutente.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-157">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="d9dc9-158">Viene illustrato come implementare gli ancoraggi spaziali di Azure come parte di un'esperienza condivisa locale completamente interattiva durante la lezione finale del modulo sharing.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-158">We learn how to implement Azure Spatial Anchors as part of a fully interactive local shared experience during the final lesson of the Sharing Module.</span></span> <span data-ttu-id="d9dc9-159">Un'esperienza di condivisione locale può includere funzionalità come la posizione, la rotazione e la scalabilità degli oggetti 3D sincronizzati, gli identificatori per ogni utente e gli Stati delle applicazioni condivise.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-159">A local sharing experience may include functionality such as synchronized 3D object position, rotation, and scale, identifiers for each user, and shared application states.</span></span> <span data-ttu-id="d9dc9-160">Gli ancoraggi spaziali di Azure migliorano questi scenari condivisi fornendo a ogni partecipante un ancoraggio comune che consente a tutti gli utenti di visualizzare gli oggetti virtuali nella stessa posizione fisica.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-160">Azure Spatial Anchors enhances these shared scenarios by providing each participant with a common anchor that lets all users see virtual objects in the same physical location.</span></span> <span data-ttu-id="d9dc9-161">Questo vale per un'ampia gamma di piattaforme per dispositivi, inclusi i dispositivi HoloLens, Android e iOS.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-161">This is true across a range of device platforms, including HoloLens, Android, and iOS devices.</span></span> <span data-ttu-id="d9dc9-162">Per informazioni su come sviluppare un'esperienza condivisa, completare tutte le lezioni del modulo sharing.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-162">To learn how to develop a shared experience, complete all lessons in the Sharing module.</span></span>

<span data-ttu-id="d9dc9-163">Nella lezione successiva verrà illustrato come fornire agli utenti il feedback in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-163">In the next Lesson, we will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="d9dc9-164">Questo feedback includerà informazioni sulla creazione di ancoraggi, sulla qualità della comprensione dell'ambiente e sullo stato della sessione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-164">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="d9dc9-165">Senza commenti, gli utenti potrebbero non sapere se un ancoraggio è stato caricato correttamente in Azure, se la qualità dell'ambiente è sufficiente per la creazione dell'ancoraggio o lo stato corrente.</span><span class="sxs-lookup"><span data-stu-id="d9dc9-165">Without feedback, users may not know whether an anchor has successfully been upload to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="d9dc9-166">Lezione successiva: Esercitazione ASA 3</span><span class="sxs-lookup"><span data-stu-id="d9dc9-166">Next Lesson: ASA Tutorial 3</span></span>](mrlearning-asa-ch3.md)

