---
title: Modulo ASA Learning MR Azure spaziali ancoraggio su HoloLens 2
description: Completa questo corso per informazioni su come implementare il riconoscimento volto di Azure in un'applicazione di realtà mista.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: realtà mista, unity, esercitazione, hololens
ms.openlocfilehash: f8a52660fe05b6ed4508321ed246b8e299b75bca
ms.sourcegitcommit: cf9f8ebbca0301e9d277853771ff6e47701ba1c1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/02/2019
ms.locfileid: "67523340"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="c9177-104">2. Il salvataggio, il recupero e la condivisione Anchor spaziale di Azure</span><span class="sxs-lookup"><span data-stu-id="c9177-104">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="c9177-105">In questa esercitazione si apprenderà come salvare i punti di ancoraggio spaziale di Azure tra più sessioni di app salvando le informazioni di ancoraggio su disco della 2 HoloLens.</span><span class="sxs-lookup"><span data-stu-id="c9177-105">In this tutorial, we will learn how to save our Azure Spatial Anchors across multiple app sessions by saving our anchor information to the HoloLens 2's disk.</span></span> <span data-ttu-id="c9177-106">Si apprenderà inoltre a condividere queste informazioni di ancoraggio con gli altri dispositivi per un allineamento di ancoraggio più dispositivi.</span><span class="sxs-lookup"><span data-stu-id="c9177-106">We will also learn how to share this anchor information to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="c9177-107">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="c9177-107">Objectives</span></span>

* <span data-ttu-id="c9177-108">Informazioni su come salvare e recuperare le informazioni di ancoraggio spaziali Azure dal disco locale 2 HoloLens, per la persistenza tra le sessioni di app</span><span class="sxs-lookup"><span data-stu-id="c9177-108">Learn how to save and retrieve Azure Spatial Anchor information from the HoloLens 2 local disk, for persistence between app sessions</span></span>

* <span data-ttu-id="c9177-109">Informazioni su come condividere le informazioni di ancoraggio spaziali Azure tra gli utenti in uno scenario multi-device</span><span class="sxs-lookup"><span data-stu-id="c9177-109">Learn how to share Azure Spatial Anchor information between users in a multi-device scenario</span></span>

  

## <a name="instructions"></a><span data-ttu-id="c9177-110">Istruzioni</span><span class="sxs-lookup"><span data-stu-id="c9177-110">Instructions</span></span>

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="c9177-111">Rendere persistenti gli ancoraggi Azure tra le sessioni di App - salvare l'ID di ancoraggio su disco</span><span class="sxs-lookup"><span data-stu-id="c9177-111">Persist Azure Anchors Between App Sessions - Save Anchor ID to Disk</span></span>

1. <span data-ttu-id="c9177-112">Cercare e aggiungere il prefab SaveAnchorToDisk alla scena.</span><span class="sxs-lookup"><span data-stu-id="c9177-112">Search for and add the SaveAnchorToDisk prefab to your scene.</span></span> <span data-ttu-id="c9177-113">Sono inclusi due pulsanti, un pulsante per salvare eventuali ID di ancoraggio di Azure disponibili per il disco 2 HoloLens e l'altro per il recupero di eventuali ID dal disco.</span><span class="sxs-lookup"><span data-stu-id="c9177-113">These include two buttons, one button for saving any available Azure Anchor IDs to the HoloLens 2 disk, and another for retrieving any IDs from the disk.</span></span>

   ![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. <span data-ttu-id="c9177-115">Configurare ogni pulsante in base alle istruzioni riportate di seguito</span><span class="sxs-lookup"><span data-stu-id="c9177-115">Configure Each button according to the instructions below</span></span>
   - <span data-ttu-id="c9177-116">Per il pulsante denominato SaveToDisk, creare un nuovo evento sotto il trigger di evento fatto clic sul pulsante, nonché il trigger di evento nel fare clic su.</span><span class="sxs-lookup"><span data-stu-id="c9177-116">For the Button named SaveToDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="c9177-117">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo SaveAzureAnchorIDToDisk() dal componente ASAmoduleScript ParentAnchor dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="c9177-117">Drag the ParentAnchor object into the empty field, and assign the SaveAzureAnchorIDToDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>
   
     > <span data-ttu-id="c9177-118">Nota: alcune i pulsanti possono apparire sovrapposti gli altri pulsanti nella scena.</span><span class="sxs-lookup"><span data-stu-id="c9177-118">Note: some of the buttons may appear overlapping the other buttons in the scene.</span></span> <span data-ttu-id="c9177-119">È possibile modificare il posizionamento del pulsante.</span><span class="sxs-lookup"><span data-stu-id="c9177-119">Feel free to adjust the button's positioning.</span></span>
   

  ![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)

   - <span data-ttu-id="c9177-123">Per il pulsante denominato GetFromDisk, creare un nuovo evento sotto il trigger di evento fatto clic sul pulsante, nonché il trigger di evento nel fare clic su.</span><span class="sxs-lookup"><span data-stu-id="c9177-123">For the Button named GetFromDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="c9177-124">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo LoadAzureAnchorIDsFromDisk() dal componente ASAmoduleScript ParentAnchor dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="c9177-124">Drag the ParentAnchor object into the empty field, and assign the LoadAzureAnchorIDsFromDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="c9177-125">Seguire le istruzioni da 1 Tutoiral per compilare l'applicazione aggiornata al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="c9177-125">Follow the instructions from Tutoiral 1 to build the updated application to your device.</span></span> <span data-ttu-id="c9177-126">Dopo aver premuto il pulsante di ancoraggio di Azure crea, come è stato fatto nella lezione precedente, è ora possibile salvare l'ID di ancoraggio di Azure per disco premendo di salvataggio al pulsante di disco.</span><span class="sxs-lookup"><span data-stu-id="c9177-126">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now save the Azure Anchor ID to disk by pressing the save to disk button.</span></span>

4. <span data-ttu-id="c9177-127">Riavviare l'applicazione, avviare la sessione di Azure, premere ID di ancoraggio, carico e quindi premere individuare Azure ancoraggio per individuare il punto di ancoraggio associato con l'ID è stato salvato sul disco.</span><span class="sxs-lookup"><span data-stu-id="c9177-127">Restart the application, start the Azure Session, Press Load Anchor ID, and then press Locate Azure Anchor to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="c9177-128">L'intera scena a questo punto deve essere bloccato in posizione, in corrispondenza della posizione è stato salvato il punto di ancoraggio in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c9177-128">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

### <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="c9177-129">Condividere punti di ancoraggio di Azure tra più dispositivi</span><span class="sxs-lookup"><span data-stu-id="c9177-129">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="c9177-130">In questa sezione si apprenderà come condividere l'ID di ancoraggio di Azure tra più dispositivi.</span><span class="sxs-lookup"><span data-stu-id="c9177-130">In this section, we'll learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="c9177-131">Questa operazione consentirà di più dispositivi eseguire query di Azure per lo stesso ID di ancoraggio, consentendo la vntana ancorati e scene a livello spaziale da allineare.</span><span class="sxs-lookup"><span data-stu-id="c9177-131">This will allow multiple devices to query Azure for the same anchor ID, allowing our anchored holograms and scenes to be spatially aligned.</span></span> <span data-ttu-id="c9177-132">Allineamento spaziale (vedere il vntana stesso nella stessa posizione fisica tra più dispositivi) è esperienze condivise chiave in locale in 2 HoloLens.</span><span class="sxs-lookup"><span data-stu-id="c9177-132">Spatial alignment (seeing the same holograms in the same physical location between multiple devices) is key to local shared experiences in the HoloLens 2.</span></span> <span data-ttu-id="c9177-133">Esistono diversi modi per trasferire le informazioni relative alle ID azure tra i dispositivi, inclusi i metodi descritti nelle esperienze condivise Anchor spaziali Azure esercitazioni (TODO: aggiungere un collegamento.) Questo esempio Usa un servizio web semplice per caricare e scaricare gli ID di ancoraggio tra i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="c9177-133">There are many ways to transfer information regarding azure IDs between devices, including methods outlined in the Azure Spatial Anchors shared experiences tutorials (TODO: add link.) This example uses a simple web service to upload and download Anchor IDs between devices.</span></span>

1. <span data-ttu-id="c9177-134">Aggiungere il prefab ShareAnchor nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="c9177-134">Add the ShareAnchor prefab into your hierarchy.</span></span> <span data-ttu-id="c9177-135">Il prefab aggiunge due nuovi pulsanti alla scena; uno per il caricamento di informazioni sull'ID di ancoraggio e l'altro per il download di ancoraggio informazioni relative all'ID.</span><span class="sxs-lookup"><span data-stu-id="c9177-135">This prefab adds two new buttons to your scene; one for uploading anchor ID information and another for downloading anchor ID information.</span></span> 

   ![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. <span data-ttu-id="c9177-137">Configurare ogni pulsante in base alle istruzioni riportate di seguito</span><span class="sxs-lookup"><span data-stu-id="c9177-137">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="c9177-138">Per il pulsante denominato, SendSharedAnchor, creare un nuovo evento sotto il trigger di evento fatto clic sul pulsante, nonché il trigger di evento nel fare clic su.</span><span class="sxs-lookup"><span data-stu-id="c9177-138">For the Button named, SendSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="c9177-139">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo ShareAnchor() dal componente ASAmoduleScript ParentAnchor dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="c9177-139">Drag the ParentAnchor object into the empty field, and assign the ShareAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

     ![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

     ![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

     

   - <span data-ttu-id="c9177-142">Per il pulsante denominato, GetSharedAnchor, creare un nuovo evento sotto il trigger di evento fatto clic sul pulsante, nonché il trigger di evento nel fare clic su.</span><span class="sxs-lookup"><span data-stu-id="c9177-142">For the Button named, GetSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="c9177-143">Trascinare l'oggetto ParentAnchor nel campo vuoto e assegnare il metodo GetSharedAzureAnchor() dal componente ASAmoduleScript ParentAnchor dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="c9177-143">Drag the ParentAnchor object into the empty field, and assign the GetSharedAzureAnchor() method from the ParentAnchor object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="c9177-144">Seguire le istruzioni da [esercitazione 1](mrlearning-base-ch1.md).</span><span class="sxs-lookup"><span data-stu-id="c9177-144">Follow the instructions from [Tutorial 1](mrlearning-base-ch1.md).</span></span> <span data-ttu-id="c9177-145">Per compilare l'applicazione aggiornata al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="c9177-145">to build the updated application to your device.</span></span> <span data-ttu-id="c9177-146">Dopo aver premuto il pulsante di ancoraggio di Azure crea, come è stato fatto nella lezione precedente, è possibile ora condividere l'ID di ancoraggio di Azure ad altri dispositivi facendo clic sul pulsante di condivisione per altri dispositivi.</span><span class="sxs-lookup"><span data-stu-id="c9177-146">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now share the Azure Anchor ID to other devices by pressing the Share To Other Device button.</span></span>

   > <span data-ttu-id="c9177-147">Nota: Selezionare l'ancoraggio padre e scorrere verso il basso lo script di ancoraggio padre.</span><span class="sxs-lookup"><span data-stu-id="c9177-147">Note: Select the parent anchor and scroll down to the parent anchor script.</span></span> <span data-ttu-id="c9177-148">Assicurarsi che il pin di condivisione pubblico sia univoco, in modo che quando si condivide, si conosce che l'indirizzo sia tuo che si desidera condividere.</span><span class="sxs-lookup"><span data-stu-id="c9177-148">Ensure that your public sharing pin is unique, so that when you share it, you know it is yours that you are sharing.</span></span> <span data-ttu-id="c9177-149">Potrebbe essere presenti migliaia di utenti che condividono i punti di ancoraggio Azure, in modo che questa operazione consentirà di verificare che si desidera condividere i punti di ancoraggio Azure corretti.</span><span class="sxs-lookup"><span data-stu-id="c9177-149">There could be thousands of users sharing their Azure anchors, so doing this will allow you to ensure you are sharing the correct Azure anchors.</span></span>

4. <span data-ttu-id="c9177-150">Se si dispone di un altro dispositivo HoloLens 2, avviare l'applicazione e quindi avviare la sessione di Azure.</span><span class="sxs-lookup"><span data-stu-id="c9177-150">If you have another HoloLens 2 device, start the application and then start the Azure Session.</span></span> <span data-ttu-id="c9177-151">Fare clic sul pulsante Ottieni ID di ancoraggio condiviso e quindi premere il pulsante di ancoraggio di Azure individuare per individuare il punto di ancoraggio associato con l'ID è stato salvato sul disco.</span><span class="sxs-lookup"><span data-stu-id="c9177-151">Press the Get Shared Anchor ID button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="c9177-152">L'intera scena a questo punto deve essere bloccato in posizione, in where è stata posizionata nell'altro dispositivo HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="c9177-152">The entire scene should now snap into position, at the where it was placed on the other HoloLens 2 device!</span></span> <span data-ttu-id="c9177-153">Se è solo uno 2 HoloLens, si potrebbe comunque testare la funzionalità, riavviare l'applicazione, avvio della sessione di Azure e quindi fare clic sul pulsante "Get Shared ancoraggio ID" pulsante e quindi premere il pulsante di ancoraggio di Azure individuare per individuare il punto di ancoraggio associato il ID è stato salvato sul disco.</span><span class="sxs-lookup"><span data-stu-id="c9177-153">If you only have one HoloLens 2, you may still test functionality by restarting the application, starting the Azure Session, and then Press the "Get Shared Anchor ID" button button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="c9177-154">L'intera scena a questo punto deve essere bloccato in posizione, in corrispondenza della posizione è stato salvato il punto di ancoraggio in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c9177-154">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="congratulations"></a><span data-ttu-id="c9177-155">Lezione completata</span><span class="sxs-lookup"><span data-stu-id="c9177-155">Congratulations</span></span>
<span data-ttu-id="c9177-156">In questa lezione è stato descritto rendere persistenti gli ancoraggi spaziali Azure tra le sessioni delle applicazioni e i riavvii dell'applicazione dal salvataggio dell'ID di ancoraggio spaziale di Azure nel disco locale in HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="c9177-156">In this Lesson you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens 2.</span></span> <span data-ttu-id="c9177-157">Inoltre appreso come condividere gli ancoraggi spaziali Azure tra più dispositivi per un'esperienza di base ologrammi multiutente, statici condivisi.</span><span class="sxs-lookup"><span data-stu-id="c9177-157">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="c9177-158">Abbiamo informazioni su come implementare gli ancoraggi spaziale di Azure come parte di un'esperienza condivisa locale completamente interattiva durante la lezione finale del modulo di condivisione.</span><span class="sxs-lookup"><span data-stu-id="c9177-158">We learn how to implement Azure Spatial Anchors as part of a fully interactive local shared experience during the final lesson of the Sharing Module.</span></span> <span data-ttu-id="c9177-159">Un'esperienza di condivisione locale può includere funzionalità, ad esempio identificatori oggetto 3D sincronizzato di posizione, rotazione e scalabilità, per ogni utente e condivisi stati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c9177-159">A local sharing experience may include functionality such as synchronized 3D object position, rotation, and scale, identifiers for each user, and shared application states.</span></span> <span data-ttu-id="c9177-160">Azure Anchor spaziali migliora questi scenari condivisi, fornendo ogni partecipante con un ancoraggio comune che consente a tutti gli utenti di visualizzare gli oggetti virtuali nella stessa posizione fisica.</span><span class="sxs-lookup"><span data-stu-id="c9177-160">Azure Spatial Anchors enhances these shared scenarios by providing each participant with a common anchor that lets all users see virtual objects in the same physical location.</span></span> <span data-ttu-id="c9177-161">Questo vale per una gamma di piattaforme del dispositivo, inclusi i dispositivi HoloLens, Android e iOS.</span><span class="sxs-lookup"><span data-stu-id="c9177-161">This is true across a range of device platforms, including HoloLens, Android, and iOS devices.</span></span> <span data-ttu-id="c9177-162">Per informazioni su come sviluppare un'esperienza condivisa, completare tutte le lezioni del modulo di condivisione.</span><span class="sxs-lookup"><span data-stu-id="c9177-162">To learn how to develop a shared experience, complete all lessons in the Sharing module.</span></span>

<span data-ttu-id="c9177-163">Nella lezione successiva si apprenderà come fornire agli utenti con il feedback in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="c9177-163">In the next Lesson, we will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="c9177-164">Questi commenti e suggerimenti verranno incluse informazioni sull'ancoraggio la creazione, la qualità della conoscenza di ambiente e lo stato della sessione di Azure.</span><span class="sxs-lookup"><span data-stu-id="c9177-164">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="c9177-165">Senza commenti e suggerimenti, agli utenti potrebbero non sapere se un ancoraggio è stato completato il caricamento in Azure, se la qualità dell'ambiente è sufficiente per la creazione di ancoraggio o lo stato corrente.</span><span class="sxs-lookup"><span data-stu-id="c9177-165">Without feedback, users may not know whether an anchor has successfully been upload to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="c9177-166">Lezione successiva: ASA Tutorial 3</span><span class="sxs-lookup"><span data-stu-id="c9177-166">Next Lesson: ASA Tutorial 3</span></span>](mrlearning-asa-ch3.md)

